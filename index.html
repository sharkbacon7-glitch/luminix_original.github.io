<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumini</title>
    <link rel="icon" href="https://i.ibb.co/XZVSKkBT/Screenshot-2025-11-10-174930-Photoroom.png" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/arduino-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Feather Icons for UI (deferred to not block rendering) -->
    <script src="https://unpkg.com/feather-icons" defer></script>

    <!-- Firebase Libraries -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <style>
        /* Custom styles to complement Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* A light gray background */
        }
        /* Animation class for elements to fade in on scroll */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Timeline styles for Journey page */
        .timeline-item {
            position: relative;
            padding-bottom: 2.5rem;
            padding-left: 2.5rem;
            border-left: 2px solid #e5e7eb;
        }
        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }
        .timeline-dot {
            position: absolute;
            left: -0.5rem;
            top: 0;
            height: 1rem;
            width: 1rem;
            background-color: #4f46e5;
            border-radius: 9999px;
            border: 2px solid white;
        }
        /* Modal styles */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-box {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header and Navigation -->
    <header id="header" class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="#home" class="nav-link flex items-center space-x-2 text-2xl font-bold text-gray-900">
                <svg class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 100-18 9 9 0 000 18z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9a3 3 0 013-3v0a3 3 0 013 3v0a3 3 0 01-3 3v0a3 3 0 01-3-3z" />
                </svg>
                <span>LUMINI</span>
            </a>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="#home" class="nav-link text-gray-600 hover:text-indigo-600 transition duration-300">Home</a>
                <!-- Dropdown Menu -->
                <div class="relative">
                    <button id="pages-dropdown-button" class="flex items-center text-gray-600 hover:text-indigo-600 transition duration-300">
                        Pages <i data-feather="chevron-down" class="w-4 h-4 ml-1"></i>
                    </button>
                    <div id="pages-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20 hidden">
                        <a href="#journey" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Our Journey</a>
                        <a href="#team" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Our Team</a>
                        <a href="#documentation" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Documentation</a>
                        <a href="#roadmap" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Roadmap</a>
                        <a href="#contact" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Contact</a>
                    </div>
                </div>
                <!-- Auth Links -->
                 <div id="auth-links" class="flex items-center space-x-4">
                    <a href="#signin" class="nav-link text-gray-600 hover:text-indigo-600 transition duration-300">Sign In</a>
                    <a href="#signup" class="nav-link bg-indigo-600 text-white px-5 py-2 rounded-full hover:bg-indigo-700 transition duration-300 shadow-md">Sign Up</a>
                </div>
                <div id="user-info" class="hidden items-center space-x-4">
                    <span id="user-email" class="text-sm text-gray-600"></span>
                    <button id="signout-button" class="text-sm text-gray-600 hover:text-indigo-600 transition duration-300">Sign Out</button>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-600 hover:text-indigo-600 hover:bg-gray-100 focus:outline-none">
                <i data-feather="menu" class="w-6 h-6"></i>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#home" class="nav-link block py-2 text-gray-600 hover:text-indigo-600">Home</a>
            <a href="#journey" class="nav-link block py-2 text-gray-600 hover:text-indigo-600">Our Journey</a>
            <a href="#team" class="nav-link block py-2 text-gray-600 hover:text-indigo-600">Our Team</a>
            <a href="#documentation" class="nav-link block py-2 text-gray-600 hover:text-indigo-600">Documentation</a>
            <a href="#roadmap" class="nav-link block py-2 text-gray-600 hover:text-indigo-600">Roadmap</a>
            <a href="#contact" class="nav-link block py-2 text-gray-600 hover:text-indigo-600">Contact</a>
            <div class="border-t border-gray-200 mt-4 pt-4">
                <div id="mobile-auth-links">
                    <a href="#signin" class="nav-link block text-center py-2 text-gray-600 hover:text-indigo-600">Sign In</a>
                    <a href="#signup" class="nav-link block mt-2 text-center bg-indigo-600 text-white px-5 py-2 rounded-full hover:bg-indigo-700">Sign Up</a>
                </div>
                 <div id="mobile-user-info" class="hidden text-center">
                    <span id="mobile-user-email" class="block text-sm text-gray-600 mb-2"></span>
                    <button id="mobile-signout-button" class="w-full bg-gray-200 text-gray-800 px-5 py-2 rounded-full hover:bg-gray-300">Sign Out</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>

        <!-- Page: Home -->
<div id="home" class="page">
    <section id="hero" class="relative h-[80vh] min-h-[500px] flex items-center justify-center text-white bg-cover bg-center" 
             style="background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.pexels.com/photos/5966251/pexels-photo-5966251.jpeg');">
        <div class="relative z-10 text-center px-4 fade-in">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">Bringing Glory To Olden Days</h1>
            <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 drop-shadow-md">A Journey Where Old is Reinvented and Polished</p>
            <a href="#features" class="bg-indigo-600/80 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-indigo-600 transition duration-300 shadow-xl transform hover:scale-105">Explore</a>
        </div>
    </section>

    <section id="about" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="fade-in">
                    <img src="https://i.imgur.com/81uoAsY.gif" 
                         loading="lazy"
                         alt="Telegraph concept animated GIF" 
                         class="rounded-lg shadow-2xl w-full h-auto">
                </div>
                <div class="fade-in">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Welcome to Our Project</h2>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        For our Tech Trek project, we chose to reinvent the telegraph — one of the earliest communication devices that changed human history. The telegraph used electrical pulses and Morse code to send messages across long distances, laying the foundation for global connectivity.
                    </p>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        We believe in a holistic approach to learning, combining rigorous academics with practical, hands-on experience. Join our vibrant community and embark on a journey of discovery.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="py-20">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold">Why we chose this project</h2>
                <p class="text-gray-600 mt-4 max-w-2xl mx-auto"></p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-8 rounded-lg shadow-lg text-center fade-in transform hover:-translate-y-2 transition duration-300">
                    <div class="bg-indigo-100 text-indigo-600 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-6">
                        <i data-feather="smartphone" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Efficiency</h3>
                    <p class="text-gray-600">The telegraph could make communication easier without the use of cellphones.</p>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center fade-in transform hover:-translate-y-2 transition duration-300">
                    <div class="bg-indigo-100 text-indigo-600 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-6">
                        <i data-feather="heart" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Accessibility</h3>
                    <p class="text-gray-600">Silent alerts are perfect for accessibility, such as for hearing-impaired users, or for new forms of personal expression.</p>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center fade-in transform hover:-translate-y-2 transition duration-300">
                    <div class="bg-indigo-100 text-indigo-600 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-6">
                        <i data-feather="alert-triangle" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Emergency Use</h3>
                    <p class="text-gray-600">It's a great tool for emergency communication in areas without internet or cellular service.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="bg-gray-900 text-white">
        <div class="container mx-auto px-6 py-20 md:py-32">
            <div class="flex flex-col md:flex-row items-center gap-12">
    
                <div class="md:w-1/2 text-center md:text-left fade-in">
                    <h2 class="text-3xl md:text-4xl font-bold">
                        Past Meets Future
                    </h2>
                    <p class="mt-6 text-lg md:text-xl text-gray-300 max-w-lg mx-auto md:mx-0">
                        Our project is a direct bridge between history and modern innovation. We didn't just rebuild the telegraph; we gave it new life.
                    </p>
                    <p class="mt-4 text-lg md:text-xl text-gray-300 max-w-lg mx-auto md:mx-0">
                        This isn't just about nostalgia. It's about proving that a simple, reliable idea, when combined with modern technology, can become a powerful, low-cost, and resilient communication tool for today.
                    </p>
                    <div class="mt-10">

                        
                    </div>
                </div>

                <div class="md:w-1/2 mt-12 md:mt-0 fade-in">
                    <img src="https://i.ibb.co/4ZmnTRL7/Untitled-design-1-Photoroom.png" 
                         alt="An old 19th-century telegraph machine blending into a modern 3D-printed LUMINI device" 
                         class="w-full h-auto">
                </div>
    
            </div>
        </div>
    </section>
    <section id="gallery" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold">Gallery</h2>
                <p class="text-gray-600 mt-4">How the Telegraph used to work.</p>
            </div>
            <div class="relative fade-in">
                <div id="media-display-container" class="w-full h-[500px] bg-black rounded-lg shadow-2xl mb-4 flex items-center justify-center"></div>
                <div id="thumbnail-container" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <img src="https://placehold.co/300x200/c7d2fe/3730a3?text=Telegraph+Video" alt="Telegraph" class="gallery-thumbnail cursor-pointer rounded-md shadow-md hover:opacity-75 border-4 border-indigo-600" data-type="video" data-src="https://i.imgur.com/iL5vVmr.mp4">
                    <img src="https://i.ibb.co/SDmkpwLf/Screenshot-2025-08-20-213850.png" alt="Gallery Image 2" class="gallery-thumbnail cursor-pointer rounded-md shadow-md hover:opacity-75 border-4 border-transparent" data-type="image" data-src="https://i.ibb.co/SDmkpwLf/Screenshot-2025-08-20-213850.png">
                    <img src="https://i.ibb.co/BHL5RkFb/schematics.png" alt="Gallery Image 3" class="gallery-thumbnail cursor-pointer rounded-md shadow-md hover:opacity-75 border-4 border-transparent" data-type="image" data-src="https://i.ibb.co/BHL5RkFb/schematics.png">
                    <img src="https://i.ibb.co/BH98f7MW/Chat-GPT-Image-Aug-19-2025-09-07-31-AM.png" alt="Gallery Image 4" class="gallery-thumbnail cursor-pointer rounded-md shadow-md hover:opacity-75 border-4 border-transparent" data-type="image" data-src="https://i.ibb.co/BH98f7MW/Chat-GPT-Image-Aug-19-2025-09-07-31-AM.png">
                </div>
            </div>
        </div>
    </section>
</div>

        <!-- Page: Journey -->
        <div id="journey" class="page hidden">
            <section class="py-20 bg-white">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16 fade-in">
                        <h2 class="text-4xl md:text-5xl font-bold">Our Project Journey</h2>
                        <p class="text-gray-600 mt-4 max-w-3xl mx-auto">From an old invention to a modern solution, here's a look at our process, learnings, and challenges.</p>
                    </div>

                    <div class="max-w-3xl mx-auto">
                        <!-- Introduction -->
                        <div class="timeline-item fade-in">
                            <div class="timeline-dot"></div>
                            <h3 class="text-2xl font-bold mb-2">Introduction</h3>
                            <p class="text-gray-600">Our project focused on taking an old invention and reinventing it with modern technology. The goal was to preserve the essence of the original invention while enhancing its functionality, efficiency, and usability through the use of modern tools and methods.</p>
                        </div>
                        <!-- Learning Process -->
                        <div class="timeline-item fade-in">
                            <div class="timeline-dot"></div>
                            <h3 class="text-2xl font-bold mb-2">Learning Process</h3>
                            <p class="text-gray-600 mb-4">Throughout this journey, we explored and learned multiple platforms that supported our project development:</p>
                            <ul class="list-disc list-inside text-gray-600 space-y-2">
                                <li><strong>Tinkercad:</strong> Helped us understand 3D modeling, prototyping, and visualizing our design.</li>
                                <li><strong>Wokwi:</strong> Allowed us to simulate electronic circuits in detail and test our ideas virtually before implementation.</li>
                                <li><strong>Circuit Building:</strong> We developed the fundamental skills to design and assemble circuits, which was crucial for bringing our concept to life.</li>
                            </ul>
                        </div>
                        <!-- Research -->
                        <div class="timeline-item fade-in">
                            <div class="timeline-dot"></div>
                            <h3 class="text-2xl font-bold mb-2">Research</h3>
                            <p class="text-gray-600">In addition to technical learning, we spent time researching old inventions and their underlying ideologies. This research not only inspired us but also gave us valuable insights into how inventors approached problem-solving in the past. By combining those ideologies with modern technologies, we worked on designing a product that feels both innovative and practical.</p>
                        </div>
                        <!-- Challenges Faced -->
                        <div class="timeline-item fade-in">
                            <div class="timeline-dot"></div>
                            <h3 class="text-2xl font-bold mb-2">Challenges Faced</h3>
                            <p class="text-gray-600 mb-4">Our journey was not without difficulties:</p>
                             <ul class="list-disc list-inside text-gray-600 space-y-2">
                                <li><strong>Time Management:</strong> Balancing multiple tasks with tight deadlines proved challenging.</li>
                                <li><strong>Workload:</strong> Handling academic responsibilities alongside the project required careful planning.</li>
                                <li><strong>Circuit Building:</strong> Since none of us had prior experience, building and testing circuits was a steep learning curve.</li>
                                <li><strong>Using Simulation Tools:</strong> Platforms like Wokwi were initially hard to navigate, but with persistence we adapted and improved.</li>
                            </ul>
                        </div>
                        <!-- Progress & Achievements -->
                        <div class="timeline-item fade-in">
                            <div class="timeline-dot"></div>
                            <h3 class="text-2xl font-bold mb-2">Progress and Achievements</h3>
                            <p class="text-gray-600">Despite the obstacles, we have steadily moved closer to completing our project. Each milestone achieved has given us a sense of satisfaction and motivation. We are proud of the skills we have developed, from technical expertise to problem-solving and teamwork.</p>
                        </div>
                        <!-- Conclusion -->
                        <div class="timeline-item fade-in">
                            <div class="timeline-dot"></div>
                            <h3 class="text-2xl font-bold mb-2">Conclusion</h3>
                            <p class="text-gray-600">This project has been a valuable journey of learning, experimentation, and perseverance. While we started with little knowledge, we have grown confident in our ability to reinvent an old invention using modern technology. We remain determined to complete and refine our project, with the ultimate aim of not only succeeding in this challenge but also contributing a meaningful innovation.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Page: Our Team -->
        <div id="team" class="page hidden">
            <section class="py-20">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16 fade-in">
                        <h2 class="text-4xl md:text-5xl font-bold">Meet the Team</h2>
                        <p class="text-gray-600 mt-4 max-w-2xl mx-auto">The minds behind the project, dedicated to bringing innovation to life.</p>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-12">
                        <!-- Team Member 1 -->
                        <div class="text-center fade-in">
                            <img src="https://i.ibb.co/zV8qwzsJ/me.png" alt="Ugyen Rigpa Yeshey" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                            <h3 class="text-xl font-bold">Ugyen Rigpa Yeshey</h3>
                            <p class="text-indigo-600 font-semibold mb-2">Team Leader</p>
                            <p class="text-gray-600">Hello! My name is Ugyen Rigpa Yeshey and I currently study in the ninth grade at The Royal Academy. Some of my interests include playing sports, writing, Gaming, and reading. For this project, I have mostly helped with the Coding and Design.
</p>
                        </div>
                        <!-- Team Member 2 -->
                        <div class="text-center fade-in">
                            <img src="https://i.ibb.co/JwFWq69c/Screenshot-2025-08-19-at-9-56-11-AM.png" alt="Team Member 2" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                            <h3 class="text-xl font-bold">Tenzing Jangsel Dorjee</h3>
                            <p class="text-indigo-600 font-semibold mb-2">Website Documentation</p>
                            <p class="text-gray-600">Hello, my interest is to explore and learn. Nothing is impossible if you put work into it that's what I have learned from my experiences.</p>
                        </div>
                        <!-- Team Member 3 -->
                        <div class="text-center fade-in">
                           <img src="https://i.ibb.co/KpgXPsVf/IMG20250817210149.jpg" alt="Team Member 3" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                            <h3 class="text-xl font-bold">Jigme Tshering</h3>
                            <p class="text-indigo-600 font-semibold mb-2">Documentation</p>
                            <p class="text-gray-600">Hi! My name is Jigme Tshering. Currently, I study in the ninth grade at The Royal Academy in Paro, Bhutan. I have a ton of hobbies, but some of them are playing chess, music, writing, and reading.</p>
                        </div>
                        <!-- Team Member 4 -->
                        <div class="text-center fade-in">
                            <img src="https://i.ibb.co/RT8QNhrH/Photo-on-8-20-25-at-4-29-AM-2.jpg" alt="Team Member 4" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                            <h3 class="text-xl font-bold">Tandin Wangyel</h3>
                            <p class="text-indigo-600 font-semibold mb-2">Circuit/Schematics</p>
                            <p class="text-gray-600">My name is Tandin Wangyel and I study in the ninth grade at The Royal Academy. I have my interests in playing sports, music, and in space and tech. For this project, I have mostly helped with the circuit and coding.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- 
        / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
        
            MODIFIED DOCUMENTATION PAGE SECTION
            New structure: Sidebar + Content Area
        
        / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
        -->
        <div id="documentation" class="page hidden">
            <section class="py-20">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16 fade-in">
                        <h2 class="text-4xl md:text-5xl font-bold">Project Documentation</h2>
                        <p class="text-gray-600 mt-4 max-w-3xl mx-auto">A technical overview of the Smart Telegraph project, from circuit design to website implementation.</p>
                    </div>

                    <!-- New Documentation Layout: Sidebar + Content -->
                    <div class="max-w-7xl mx-auto flex flex-col md:flex-row gap-8 lg:gap-12">
                        
                        <!-- Sidebar Navigation -->
<aside id="doc-sidebar" class="md:w-1/4 lg:w-1/5 fade-in">
    <nav id="doc-nav" class="sticky top-28">
        <ul class="space-y-2">
            <li><a href="#doc-circuit-design" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100"><i data-feather="cpu" class="w-5 h-5"></i><span>Circuit Design</span></a></li>
            <li><a href="#doc-making-design" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100"><i data-feather="settings" class="w-5 h-5"></i><span>Making the Design</span></a></li>
            <li><a href="#doc-morse-code" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100"><i data-feather="message-circle" class="w-5 h-5"></i><span>Learn Morse Code</span></a></li>
            <li><a href="#doc-build-summary" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100"><i data-feather="list" class="w-5 h-5"></i><span>Build Summary</span></a></li>
            <li><a href="#doc-website-design" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100"><i data-feather="layout" class="w-5 h-5"></i><span>Website Designing</span></a></li>
            <li>
    <a href="#doc-code" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100">
        <i data-feather="code" class="w-5 h-5"></i>
        <span>Source Code</span>
    </a>
</li>
            <li><a href="#doc-history" class="doc-nav-link flex items-center gap-3 w-full text-left p-3 rounded-md transition duration-150 text-gray-600 hover:bg-gray-100"><i data-feather="archive" class="w-5 h-5"></i><span>History</span></a></li>
            </ul>
    </nav>
</aside>

                        <!-- Content Area -->
                        <div class="md:w-3/4 lg:w-4/5 min-w-0">
                            
                            <!-- 
                                =================================
                                SECTION: Circuit Design
                                =================================
                                ** FIX APPLIED: Added 'hidden' class **
                            -->
                            <div id="doc-circuit-design" class="doc-section bg-white p-8 rounded-lg shadow-lg fade-in hidden">
    
    <h3 class="text-2xl font-bold mb-6 flex items-center">
        <i data-feather="cpu" class="w-6 h-6 mr-3 text-indigo-600"></i>Circuit Design
    </h3>

    <div class="flex flex-col md:flex-row gap-6 md:gap-8">

        <div class="flex-shrink-0 md:w-1/4 lg:w-1/5">
            <nav class="flex flex-row md:flex-col gap-2 border-b-2 md:border-b-0 md:border-r-2 border-gray-100 pb-2 md:pb-0 md:pr-4">
                
                <button 
                    onclick="showCircuitTab('circuit-details')" 
                    id="btn-circuit-details"
                    class="circuit-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 bg-indigo-100 text-indigo-700">
                    <i data-feather="clipboard" class="w-4 h-4 mr-2.5"></i>
                    Circuit Details
                </button>
                
                <button 
                    onclick="showCircuitTab('pinouts')" 
                    id="btn-pinouts"
                    class="circuit-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="map-pin" class="w-4 h-4 mr-2.5"></i>
                    Pinouts
                </button>
                <button 
                    onclick="showCircuitTab('demonstration')" 
                    id="btn-demonstration"
                    class="circuit-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="video" class="w-4 h-4 mr-2.5"></i>
                Demonstration
                </button>
                

            </nav>
        </div>

        <div class="flex-grow md:w-3/4 lg:w-4/5 min-w-0">
            
            <div id="tab-circuit-details" class="circuit-tab-content space-y-8">
                
                <div>
                    <p class="text-gray-700 mb-4">We have designed a simple circuit for our Smart Telegraph. Our circuit design involves the following materials:</p>
                    <ul class="list-disc list-inside text-gray-700 space-y-2 mb-6">
                        <li>ESP32</li>
                        <li>OLED Display</li>
                        <li>Button x3</li>
                        <li>Buzzer</li>
                        <li>Wires</li>
                        <li>Breadboard</li>
                        <li>Resistor</li>
                        <li>USB Power bank</li>
                    </ul>
                    <img src="https://i.ibb.co/SDmkpwLf/Screenshot-2025-08-20-213850.png" alt="Circuit Diagram" class="rounded-lg shadow-md w-full mb-6">
                    <h4 class="text-xl font-semibold mb-2">Detailed Function of the Materials:</h4>
                    <ul class="space-y-4 text-gray-700">
                        <li><strong>ESP32:</strong> We have decided to use ESP32 as our microcontroller. It helps our project work through the help of the Built-in Wi-Fi and Bluetooth and it uses low-power.</li>
                        <li><strong>OLED Display:</strong> The OLED display is a screen that will be used for displaying the letters formed by the morsecodes entered. It can display texts and graphics and is known for its low-power consumption, contrast, and vibrant colours.</li>
                        <li><strong>Buttons:</strong> The buttons will be used for entering the dots, dashes, and space. These dots, dashes, and space make up our letters using morsecode.</li>
                        <li><strong>Buzzer:</strong> The buzzer will be used for making the sounds of the dot, dash, and space. The dot makes a short beep sound, whereas the dash will make a sound that is longer than what the dot makes. As for the space, there will be no sound.</li>
                        <li><strong>Power Bank</strong> The power bank will be used to power the esp 32 and the other components. Its main idea is to make the device portable. </li>
                    </ul>
                </div>
                
                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-bold mb-4">The first design of our circuit board</h4>
                    <img src="https://i.ibb.co/MkB7qHJ8/Screenshot-2025-11-10-170158.png" alt="First circuit design" class="rounded-lg shadow-md w-full mb-4">
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        This is the first design which uses a breadboard, OLED, ESP32, and a button. The initial plan here was to make a single button make both dot and dash. However we could not accomplish this at the time being. No buzzer here as we only thought of displaying the message.
                    </p>
                </div>

                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-bold mb-4">The second design of our circuit board</h4>
                    <img src="https://i.ibb.co/rGBpVLXg/Screenshot-2025-11-10-170359.png" alt="Second circuit design" class="rounded-lg shadow-md w-full mb-4">
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        This is the second design in which we used 3 buttons for dot, dash, and space. We also added a buzzer to make the sound of dots and dashes. At the time, we didn't know how the breadboard works so it didnD2%80%99t work quite well.
                    </p>
                </div>
                
                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-bold mb-4">The Third design of our circuit board</h4>
                    <img src="https://i.ibb.co/WNQXkJY1/Screenshot-2025-11-10-171216.png" alt="Third circuit design" class="rounded-lg shadow-md w-full mb-4">
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        The third design is the same as the second, the only difference being we didnD2%80%99t use the breadboard this time. This helped us actually make the code work, marking our success. It used 3 buttons for dot, dash, and space and worked well. Our next step was to make it function on one button and using the breadboard.
                    </p>
                </div>
                
                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-semibold mb-4">Success! Final Wokwi Design (One Button)</h4>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        After much testing, we've finalized our circuit design in Wokwi! A key breakthrough was simplifying our input mechanism. We successfully developed code that handles dots, dashes, *and* spaces all from a single button. This refinement not only makes the device more elegant but also saves on components and complexity.
                    </p>
                    <img src="https://i.ibb.co/zVHRwTcK/Screenshot-2025-11-10-144747.png" alt="Final Wokwi circuit with one button" class="rounded-lg shadow-md w-full mb-2">
                    <p class="text-sm text-gray-600 italic text-center">The finalized one-button circuit simulation in Wokwi.</p>
                </div>

                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-semibold mb-4">Physical Build & Testing</h4>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        With our materials in hand, we began building and testing the physical circuit. Our one-button code worked perfectly on the breadboard.
                    </p>
                    <img src="https://i.ibb.co/zM3RJQ6/Screenshot-2025-11-10-145412.png" alt="Team working on physical circuit" class="rounded-lg shadow-md w-full mb-2">
                    <p class="text-sm text-gray-600 italic text-center">Our team working on the physical build and testing the single-button code.</p>
                </div>

                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-semibold mb-4">Troubleshooting: Wi-Fi Method</h4>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Our next step was Wi-Fi. We initially attempted to use the ESP-NOW protocol for direct device-to-device communication. Unfortunately, this led to a critical 'Guru Meditation Error' as seen in the log, which repeatedly crashed the device.
                    </p>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        After several attempts to debug it, we decided to pivot our strategy. We switched to a more traditional Wi-Fi method, connecting both ESP32s to a local Wi-Fi network. This new approach proved to be much more stable and worked, allowing us to successfully achieve transmission between the units.
                    </p>
                    <img src="https://i.ibb.co/TMXSbLVp/Screenshot-2025-11-09-221145.png" alt="ESP32 boot error log" class="rounded-lg shadow-md w-full mb-2">
                    <p class="text-sm text-gray-600 italic text-center">The error we faced while trying to use ESP-NOW.</p>
                </div>

                <div class="border-t border-gray-200 mt-8 pt-6">
                    <h4 class="text-xl font-semibold mb-4">Achievement: Wi-Fi Transmission!</h4>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Success! After pivoting to the traditional Wi-Fi method and a long debugging session, we achieved our goal: wireless transmission between the two ESP32 units. One unit can now send a message, and the other receives it, displaying it on the OLED screen.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <img src="https://i.ibb.co/7xcG0KnC/Screenshot-2025-11-10-151146.png" alt="ESP32 unit before receiving message" class="rounded-lg shadow-md w-full mb-2">
                            <p class="text-sm text-gray-600 italic text-center">Unit 1 (Receiver) - Before receiving message.</p>
                        </div>
                        <div>
                            <img src="https://i.ibb.co/qLpb9vyn/Screenshot-2025-11-10-151141.png" alt="ESP32 unit after receiving message" class="rounded-lg shadow-md w-full mb-2">
                            <p class="text-sm text-gray-600 italic text-center">Unit 2 (Receiver) - After receiving message.</p>
                        </div>
                    </div>
                </div>

            </div> <div id="tab-pinouts" class="circuit-tab-content hidden space-y-8">
                <h4 class="text-xl font-bold">Design Pinouts</h4>
                <p class="text-gray-700">Here are the pinout images for each of the circuit designs shown in the "Circuit Details" tab.</p>
                
                <div class="border-t border-gray-200 pt-6 space-y-4">
                    <h5 class="text-lg font-semibold">First Design</h5>
                    <p class="text-sm font-medium text-gray-600 mb-2">Circuit Image:</p>
                    <img src="https://i.ibb.co/MkB7qHJ8/Screenshot-2025-11-10-170158.png" alt="First circuit design" class="rounded-lg shadow-md w-full">
                    
                    <p class="text-sm font-medium text-gray-600 mb-2 pt-4">Pinout Image:</p>
                    <img src="https://i.ibb.co/hFFJq3Sw/Screenshot-2025-11-11-074707.png" alt="First design pinout table" class="rounded-lg shadow-md w-full">
                </div>

                <div class="border-t border-gray-200 pt-6 space-y-4">
                    <h5 class="text-lg font-semibold">Second Design</h5>
                    <p class="text-sm font-medium text-gray-600 mb-2">Circuit Image:</p>
                    <img src="https://i.ibb.co/rGBpVLXg/Screenshot-2025-11-10-170359.png" alt="Second circuit design" class="rounded-lg shadow-md w-full">
                    
                    <p class="text-sm font-medium text-gray-600 mb-2 pt-4">Pinout Image:</p>
                    <img src="https://i.ibb.co/Mx9hhMkD/Screenshot-2025-11-11-074740.png" alt="Second design pinout table" class="rounded-lg shadow-md w-full">
                </div>

                <div class="border-t border-gray-200 pt-6 space-y-4">
                    <h5 class="text-lg font-semibold">Third Design</h5>
                    <p class="text-sm font-medium text-gray-600 mb-2">Circuit Image:</p>
                    <img src="https://i.ibb.co/WNQXkJY1/Screenshot-2025-11-10-171216.png" alt="Third circuit design" class="rounded-lg shadow-md w-full">
                    
                    <p class="text-sm font-medium text-gray-600 mb-2 pt-4">Pinout Image:</p>
                    <img src="https://i.ibb.co/0L0Dzf6/Screenshot-2025-11-11-074811.png" alt="Third design pinout table" class="rounded-lg shadow-md w-full">
                </div>

                <div class="border-t border-gray-200 pt-6 space-y-4">
                    <h5 class="text-lg font-semibold">Final Design</h5>
                    <p class="text-sm font-medium text-gray-600 mb-2">Circuit Image:</p>
                    <img src="https://i.ibb.co/zVHRwTcK/Screenshot-2025-11-10-144747.png" alt="Final circuit design" class="rounded-lg shadow-md w-full">
                    
                    <p class="text-sm font-medium text-gray-600 mb-2 pt-4">Pinout Image:</p>
                    <img src="https://i.ibb.co/3y1Y6PfM/Screenshot-2025-11-11-074827.png" alt="Final design pinout table" class="rounded-lg shadow-md w-full">
                </div>
                    </div>
                <div id="tab-demonstration" class="circuit-tab-content hidden space-y-8">
    
    <h4 class="text-xl font-bold">Project Demonstrations</h4>
    <p class="text-gray-700 leading-relaxed">
        See the Smart Telegraph in action! These videos showcase the key functionalities, from the single-button Morse code input to the successful Wi-Fi transmission between the two units.
    </p>

    <div class="border-t border-gray-200 pt-6 space-y-4">
        <h5 class="text-lg font-semibold">Demo 1: Emojies!</h5>
        <p class="text-gray-700 leading-relaxed mb-4">
            This video demonstrates the core logic of the single-button input. Watch how short presses (dots), long presses (dashes), and pauses (spaces) are captured, sounded by the buzzer, and translated into letters and emojies on the OLED display.
        </p>
        
        <div class="w-full overflow-hidden rounded-lg shadow-md bg-black">
             <video 
                class="w-full h-auto"
                src="https://i.imgur.com/zDu2Mao.mp4" 
                title="Demonstration of single-button Morse code entry"
                controls
                preload="metadata">
                Your browser does not support the video tag.
             </video>
        </div>
    </div>

    <div class="border-t border-gray-200 pt-6 space-y-4">
        <h5 class="text-lg font-semibold">Demo 2: Both Units Work</h5>
        <p class="text-gray-700 leading-relaxed mb-4">
            As you see here both units work and are sending messages to each other through Wi-Fi.
        <div class="w-full overflow-hidden rounded-lg shadow-md bg-black">
             <video 
                class="w-full h-auto"
                src="https://i.imgur.com/KWnCqK0.mp4" 
                title="Demonstration of Wi-Fi message transmission between ESP32s"
                controls
                preload="metadata">
                Your browser does not support the video tag.
             </video>
        </div>
        <div class="border-t border-gray-200 pt-6 space-y-4">
    <h5 class="text-lg font-semibold">Demo 3: Update: Blind Mode Integration</h5>
    <p class="text-gray-700 leading-relaxed mb-4">
        We've introduced a significant update: an accessibility-focused 'Blind Mode'. This feature is designed specifically for visually impaired users. When a message is received, this mode bypasses the OLED display and instead translates the incoming text *back* into Morse code, playing it aloud as audio beeps. This crucial update dramatically expands the device's utility, making it a viable communication tool for everyone, including those with disabilities.
    </p>
    
    <div class="w-full overflow-hidden rounded-lg shadow-md bg-black">
         <video 
             class="w-full h-auto"
             src="https://i.imgur.com/A8X6zYu.mp4" 
             title="Demonstration of Blind Mode accessibility feature"
             controls
             preload="metadata">
             Your browser does not support the video tag.
         </video>
    </div>
</div>
    </div>



                

                
                

            </div> </div> </div> </div>

                            <!-- 
                                =================================
                                SECTION: Making of the Design
                                =================================
                            -->
                        <div id="doc-making-design" class="doc-section hidden bg-white p-8 rounded-lg shadow-lg fade-in space-y-8">

    <h3 class="text-2xl font-bold flex items-center"><i data-feather="settings" class="w-6 h-6 mr-3 text-indigo-600"></i>Making the Design</h3>

    <div class="space-y-6">
        <p class="text-gray-700">I will be sharing how me and my team have made our circuit for our Modern Telegraph using Wokwi. These are the components used in the circuit:</p>
        <div class="grid md:grid-cols-2 gap-8 items-center">
            <div>
                <ul class="list-disc list-inside text-gray-700 space-y-2 mb-6">
                    <li>ESP32</li>
                    <li>OLED Display</li>
                    <li>Buttons x3</li>
                    <li>Buzzer</li>
                </ul>
                <p class="text-gray-700">It was the first time I would experience designing a circuit. We decided to use ESP32 as our microcontroller so our project can work through Wi-Fi and Bluetooth. Firstly, we had to understand each component's functions and pinouts. We used google search to find each component’s function and pinouts. To make our progress faster, we referred to connections between ESP32, buttons, and OLED display.</p>
            </div>
            <div class="grid grid-cols-2 gap-6">
                <a href="https://i.ibb.co/3yvXPqwL/Screenshot-2025-08-20-at-9-18-33-PM.png" data-lightbox="design-gallery" data-title="Wokwi Circuit">
                    <img src="https://i.ibb.co/3yvXPqwL/Screenshot-2025-08-20-at-9-18-33-PM.png" alt="Wokwi Circuit" class="rounded-lg shadow-md w-full">
                </a>
                <a href="https://i.ibb.co/7MmyNnF/IMG20250818213747.jpg" data-lightbox="design-gallery" data-title="Physical Breadboard Circuit">
                    <img src="https://i.ibb.co/7MmyNnF/IMG20250818213747.jpg" alt="Physical Breadboard Circuit" class="rounded-lg shadow-md w-full">
                </a>
                <a href="https://i.ibb.co/HTZ13QkY/IMG-20251111-170055-1.jpg" data-lightbox="design-gallery" data-title="Physical Circuit Prototype">
                    <img src="https://i.ibb.co/HTZ13QkY/IMG-20251111-170055-1.jpg" alt="Physical Circuit Prototype" class="rounded-lg shadow-md w-full">
                </a>
                <a href="https://i.ibb.co/N2hqZKGn/IMG-20251111-170047.jpg" data-lightbox="design-gallery" data-title="Physical Circuit Close-up">
                    <img src="https://i.ibb.co/N2hqZKGn/IMG-20251111-170047.jpg" alt="Physical Circuit Close-up" class="rounded-lg shadow-md w-full">
                </a>
            </div>
        </div>
    </div>

    <div class="flex flex-col md:flex-row gap-6 md:gap-8 border-t border-gray-200 pt-8">

        <div class="flex-shrink-0 md:w-1/4 lg:w-1/5">
            <nav class="flex flex-row md:flex-col gap-2 border-b-2 md:border-b-0 md:border-r-2 border-gray-100 pb-2 md:pb-0 md:pr-4">
                
                <button 
                    onclick="showDesignTab('physical-layout')" 
                    id="btn-physical-layout"
                    class="design-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 bg-indigo-100 text-indigo-700">
                    <i data-feather="layout" class="w-4 h-4 mr-2.5"></i>
                    Physical Layout
                </button>
                
                <button 
                    onclick="showDesignTab('process')" 
                    id="btn-process"
                    class="design-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="list" class="w-4 h-4 mr-2.5"></i>
                    Process
                </button>

                <button 
                    onclick="showDesignTab('Updates')" 
                    id="btn-updates"
                    class="design-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="zap" class="w-4 h-4 mr-2.5"></i>
                    Updates
                </button>
            </nav>
        </div>

        <div class="flex-grow md:w-3/4 lg:w-4/5 min-w-0">
            
            <div id="tab-physical-layout" class="design-tab-content space-y-6 fade-in">
                <h4 class="text-xl font-bold">Physical Layout Planning</h4>
                <p class="text-gray-700 leading-relaxed">
                    With the Wokwi simulation proving successful, our attention shifted to the physical design and enclosure. We began prototyping a case and arranging the components—the ESP32, OLED screen, and button—for optimal usability and a clean, compact final product.
                </p>
                <img src="https://i.ibb.co/Q3cJPgXD/Screenshot-2025-11-10-153602.png" 
                     alt="Physical layout of components on breadboard" 
                     class="rounded-lg shadow-md w-full mb-2 cursor-pointer" 
                     onclick="showDesignTab('process')">
                <p class="text-sm text-gray-600 italic text-center">Planning the physical component layout on the breadboard for the final enclosure.</p>
            </div>

            <div id="tab-process" class="design-tab-content hidden space-y-8 fade-in">
                <h4 class="text-xl font-bold">Process</h4>
                <div class="space-y-6">
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">1. First we create a sketch of the box.</p>
                        <a href="https://i.ibb.co/1tLqs85J/Screenshot-2025-11-10-175412.png" data-lightbox="process-gallery" data-title="1. First we create a sketch of the box.">
                            <img src="https://i.ibb.co/1tLqs85J/Screenshot-2025-11-10-175412.png" alt="Process step 1" class="rounded-lg shadow-md w-full">
                        </a>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">2. Size</p>
                        <a href="https://i.ibb.co/3mnvnkG0/Screen-Shot-2025-11-10-at-12-17-22-PM.png" data-lightbox="process-gallery" data-title="2. Size">
                            <img src="https://i.ibb.co/3mnvnkG0/Screen-Shot-2025-11-10-at-12-17-22-PM.png" alt="Process step 2" class="rounded-lg shadow-md w-full">
                        </a>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">3. Then we extrude it using the extrude tool, and extrude it to 40 mm.</p>
                        <p class="text-sm text-gray-600 mb-2 italic">Extrude means to make a shape (a material such as metal or plastic) by forcing it through a die.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <a href="https://i.ibb.co/BVDtBnLD/Screen-Shot-2025-11-10-at-12-17-19-PM.png" data-lightbox="process-gallery" data-title="3. Extrude tool">
                                <img src="https://i.ibb.co/BVDtBnLD/Screen-Shot-2025-11-10-at-12-17-19-PM.png" alt="Process step 3a" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/C5zVC6zg/Screen-Shot-2025-11-10-at-5-08-13-PM.png" data-lightbox="process-gallery" data-title="3. Extruded to 40mm">
                                <img src="https://i.ibb.co/C5zVC6zg/Screen-Shot-2025-11-10-at-5-08-13-PM.png" alt="Process step 3b" class="rounded-lg shadow-md w-full">
                            </a>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">4. Next we need to create a hole in the box, so we create a sketch on the box and extrude it downwards.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <a href="https://i.ibb.co/1G6y8Nb3/Screen-Shot-2025-11-10-at-6-04-58-PM.png" data-lightbox="process-gallery" data-title="4. Create a sketch on the box">
                                <img src="https://i.ibb.co/1G6y8Nb3/Screen-Shot-2025-11-10-at-6-04-58-PM.png" alt="Process step 4a" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/QvKyn04x/Screen-Shot-2025-11-10-at-6-07-02-PM.png" data-lightbox="process-gallery" data-title="4. Extrude downwards">
                                <img src="https://i.ibb.co/QvKyn04x/Screen-Shot-2025-11-10-at-6-07-02-PM.png" alt="Process step 4b" class="rounded-lg shadow-md w-full">
                            </a>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">5. It should look like this after extrusion.</p>
                        <a href="https://i.ibb.co/4wyTHCFX/Screen-Shot-2025-11-10-at-6-08-51-PM.png" data-lightbox="process-gallery" data-title="5. After extrusion">
                            <img src="https://i.ibb.co/4wyTHCFX/Screen-Shot-2025-11-10-at-6-08-51-PM.png" alt="Process step 5" class="rounded-lg shadow-md w-full">
                        </a>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">6. Next we need to create a top to hold the oled and button so create another sketch with the same measurements as the first box and also Extrude it.</p>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <a href="https://i.ibb.co/cK9fn8m2/Screen-Shot-2025-11-10-at-6-10-58-PM.png" data-lightbox="process-gallery" data-title="6. Create sketch for top">
                                <img src="https://i.ibb.co/cK9fn8m2/Screen-Shot-2025-11-10-at-6-10-58-PM.png" alt="Process step 6a" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/C3GdZBty/Screen-Shot-2025-11-10-at-6-13-58-PM.png" data-lightbox="process-gallery" data-title="6. Extrude the top">
                                <img src="https://i.ibb.co/C3GdZBty/Screen-Shot-2025-11-10-at-6-13-58-PM.png" alt="Process step 6b" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/mCYgfpYT/Screen-Shot-2025-11-10-at-6-14-23-PM.png" data-lightbox="process-gallery" data-title="6. Top after extrusion">
                                <img src="https://i.ibb.co/mCYgfpYT/Screen-Shot-2025-11-10-at-6-14-23-PM.png" alt="Process step 6c" class="rounded-lg shadow-md w-full">
                            </a>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">8. We create a hole on the lid for the oled, do the same thing to make a hole extrude it inward.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <a href="https://i.ibb.co/7tjPzXdY/Screen-Shot-2025-11-10-at-6-26-25-PM.png" data-lightbox="process-gallery" data-title="8. Create sketch for OLED hole">
                                <img src="https://i.ibb.co/7tjPzXdY/Screen-Shot-2025-11-10-at-6-26-25-PM.png" alt="Process step 8a" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/8ngQxT7M/Screen-Shot-2025-11-10-at-6-26-58-PM.png" data-lightbox="process-gallery" data-title="8. Extrude OLED hole inward">
                                <img src="httpss://i.ibb.co/8ngQxT7M/Screen-Shot-2025-11-10-at-6-26-58-PM.png" alt="Process step 8b" class="rounded-lg shadow-md w-full">
                            </a>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">9. It should look like this, next we create a hole for the button.</p>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <a href="https.ibb.co/0H2HHMk/Screen-Shot-2025-11-10-at-6-29-02-PM.png" data-lightbox="process-gallery" data-title="9. Lid after OLED hole">
                                <img src="https://i.ibb.co/0H2HHMk/Screen-Shot-2025-11-10-at-6-29-02-PM.png" alt="Process step 9a" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https.ibb.co/QFvdRTGT/Screen-Shot-2025-11-10-at-6-29-43-PM.png" data-lightbox="process-gallery" data-title="9. Create hole for button">
                                <img src="https://i.ibb.co/QFvdRTGT/Screen-Shot-2025-11-10-at-6-29-43-PM.png" alt="Process step 9b" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/4ZL2hvb4/Screen-Shot-2025-11-10-at-6-31-05-PM.png" data-lightbox="process-gallery" data-title="9. Button hole after extrusion">
                                <img src="https://i.ibb.co/4ZL2hvb4/Screen-Shot-2025-11-10-at-6-31-05-PM.png" alt="Process step 9c" class="rounded-lg shadow-md w-full">
                            </a>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">10. Next we create a hole for a buzzer. So we use the hole tool.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <a href="https://i.ibb.co/1fH56xHX/Screen-Shot-2025-11-10-at-6-34-48-PM.png" data-lightbox="process-gallery" data-title="10. Use hole tool for buzzer">
                                <img src="https://i.ibb.co/1fH56xHX/Screen-Shot-2025-11-10-at-6-34-48-PM.png" alt="Process step 10a" class="rounded-lg shadow-md w-full">
                            </a>
                            <a href="https://i.ibb.co/3mM8w0Q4/Screen-Shot-2025-11-10-at-6-35-16-PM.png" data-lightbox="process-gallery" data-title="10. Buzzer hole complete">
                                <img src="https://i.ibb.co/3mM8w0Q4/Screen-Shot-2025-11-10-at-6-35-16-PM.png" alt="Process step 10b" class="rounded-lg shadow-md w-full">
                            </a>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800 mb-2">11. End product!!!</p>
                        <a href="https://i.ibb.co/VWSkp4Zj/Screen-Shot-2025-11-10-at-6-36-51-PM.png" data-lightbox="process-gallery" data-title="11. End product!!!">
                            <img src="https://i.ibb.co/VWSkp4Zj/Screen-Shot-2025-11-10-at-6-36-51-PM.png" alt="Process step 11" class="rounded-lg shadow-md w-full">
                        </a>
                    </div>
                </div> </div> <div id="tab-Updates" class="design-tab-content hidden space-y-8 fade-in">
                <h4 class="text-xl font-bold">Design Updates & Prototyping</h4>
                
                <div class="space-y-4">
                    <h5 class="text-lg font-semibold text-gray-800">1. First Prototype: 3D Print</h5>
                    <p class="text-gray-700 leading-relaxed">
                        After printing our first prototype, we found it didn’t work quite well, as you can see below.
                    </p>
                    <a href="https://i.ibb.co/wNqx2DBD/Screenshot-2025-11-12-124520.png" data-lightbox="updates-gallery" data-title="First 3D print prototype - incorrect hole sizes.">
                        <img src="https://i.ibb.co/wNqx2DBD/Screenshot-2025-11-12-124520.png" alt="First 3D print prototype failure" class="rounded-lg shadow-md w-full max-w-lg mx-auto">
                    </a>
                    <p class="text-gray-700 leading-relaxed">
                        The holes we designed for the cable and button were too small. This failure was a valuable learning experience, helping us assess the correct measurements for the next design.
                    </p>
                    <p class="text-gray-700 leading-relaxed font-medium">
                        Since the 3D printing took hours to complete, we decided to switch to laser cutting, which helped us save a lot of time and iterate faster.
                    </p>
                </div>

                <div class="border-t border-gray-200 pt-6 space-y-4">
                    <h5 class="text-lg font-semibold text-gray-800">2. Pivot to Laser Cutting</h5>
                    <p class="text-gray-700 leading-relaxed">
                        We created a new `.svg` file (left) for the laser cutter. After cutting the design, we got the physical prototype (right).
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div>
                            <a href="https://i.ibb.co/mVmtsrjw/Screenshot-2025-11-12-124742.png" data-lightbox="updates-gallery" data-title="The .svg file for the laser cutter.">
                                <img src="https://i.ibb.co/mVmtsrjw/Screenshot-2025-11-12-124742.png" alt="SVG file for laser cutting" class="rounded-lg shadow-md w-full h-full object-contain border border-gray-100">
                            </a>
                            <p class="text-sm text-gray-600 italic text-center mt-2">The `.svg` design file.</p>
                        </div>
                        <div>
                            <a href="https://i.ibb.co/35wDydjm/IMG-20251112-124857.jpg" data-lightbox="updates-gallery" data-title="Laser-cut prototype with fixed holes.">
                                <img src="https://i.ibb.co/35wDydjm/IMG-20251112-124857.jpg" alt="Laser-cut prototype result" class="rounded-lg shadow-md w-full h-full object-cover">
                            </a>
                            <p class="text-sm text-gray-600 italic text-center mt-2">The physical laser-cut result.</p>
                        </div>
                    </div>
                    <p class="text-gray-700 leading-relaxed">
                        This is the product from the laser-cutting machine. The holes are now fixed and the correct size. The top piece for the enclosure is still in progress.
                    </p>
                </div>
                
            </div> </div> </div> </div> 
                            
                            <!-- 
                                =================================
                                SECTION: Learn Morse Code
                                =================================
                            -->
<div id="doc-morse-code" class="doc-section hidden bg-white p-8 rounded-lg shadow-lg fade-in space-y-8">

    <h3 class="text-2xl font-bold flex items-center"><i data-feather="message-circle" class="w-6 h-6 mr-3 text-indigo-600"></i>Learn Morse Code</h3>

    <div class="flex flex-col md:flex-row gap-6 md:gap-8 border-t border-gray-200 pt-8">

        <div class="flex-shrink-0 md:w-1/4 lg:w-1/5">
            <nav class="flex flex-row md:flex-col gap-2 border-b-2 md:border-b-0 md:border-r-2 border-gray-100 pb-2 md:pb-0 md:pr-4">
                
                <button 
                    onclick="showMorseTab('learn')" 
                    id="btn-morse-learn"
                    class="morse-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 bg-indigo-100 text-indigo-700">
                    <i data-feather="book-open" class="w-4 h-4 mr-2.5"></i>
                    Learn the Basics
                </button>

                <button 
                    onclick="showMorseTab('system')" 
                    id="btn-morse-system"
                    class="morse-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="cpu" class="w-4 h-4 mr-2.5"></i>
                    Emoji System
                </button>
                
                <button 
                    onclick="showMorseTab('table')" 
                    id="btn-morse-table"
                    class="morse-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="grid" class="w-4 h-4 mr-2.5"></i>
                    Full Translation Table
                </button>

                <button 
                    onclick="showMorseTab('updates')" 
                    id="btn-morse-updates"
                    class="morse-tab-btn w-full text-left p-3 rounded-md font-medium text-sm flex items-center transition-all duration-150 text-gray-600 hover:bg-gray-100 hover:text-gray-900">
                    <i data-feather="zap" class="w-4 h-4 mr-2.5"></i>
                    Updates
                </button>

            </nav>
        </div>

        <div class="flex-grow md:w-3/4 lg:w-4/5 min-w-0">
            
            <div id="tab-morse-learn" class="morse-tab-content space-y-8 fade-in">
            
                <h4 class="text-xl font-bold">What is Morse Code?</h4>
                <p class="text-gray-700 leading-relaxed">Morse code is a method of transmitting information as a series of on-off tones, lights, or clicks. In our project, a "short tap" is a <strong>dit</strong> (·) and a "long tap" (or holding the button) is a <strong>dah</strong> (–).</p>
                <p class="text-gray-700 leading-relaxed">The key isn't just the taps—it's the silence in between. The pauses are just as important as the taps, as they are what separate letters and words.</p>

                <div class="space-y-4">
                    <h5 class="font-semibold text-lg text-gray-800">The 5 Elements of Morse Timing</h5>
                    <ul class="list-disc list-inside text-gray-700 space-y-3 pl-4">
                        <li>
                            <strong>1. Dit (·):</strong> The base unit of time. In our project, this is a quick button tap.
                        </li>
                        <li>
                            <strong>2. Dah (–):</strong> Three times as long as a dit. This is holding the button.
                        </li>
                        <li>
                            <strong>3. Intra-character space:</strong> The pause *between* parts of the same letter. (e.g., the pause between the · and – in "A"). This is short, about one dit long.
                        </li>
                        <li>
                            <strong>4. Inter-character space:</strong> The pause *between* letters. (e.g., the pause between "H" and "I"). This is longer, about three dits long.
                        </li>
                        <li>
                            <strong>5. Word space:</strong> The pause *between* words. This is the longest, about seven dits long. In our project, this long pause is what sends the message.
                        </li>
                    </ul>
                </div>
                
                <div class="p-4 bg-indigo-50 border-l-4 border-indigo-500 rounded-r-lg">
                    <p class="font-medium text-indigo-800">How to Practice</p>
                    <p class="text-indigo-700 leading-relaxed mt-1">Don't try to memorize the whole chart! Start with simple letters. Try tapping out "E" (·), "T" (–), "I" (··), and "M" (– –). Then combine them to write a word like "IT" (··  –) or "ME" (– –  ·).</p>
                </div>
                
            </div>

            <div id="tab-morse-system" class="morse-tab-content hidden space-y-6 fade-in">
                
                <h4 class="text-xl font-bold">The Animated Emoji "Magic Trick"</h4>
                <p class="text-gray-700 leading-relaxed">This was the coolest update. We changed our Morse code "map" from a simple letter-translator into a "command" system. Here’s a clearer breakdown of how it works:</p>
                
                <p class="text-gray-700 leading-relaxed">The "trick" is that we invented Morse codes that don't translate to letters, but to internal **keywords** (like `EMOJI_WINK`). The receiver's device looks for these keywords and, instead of printing them, runs a special function.</p>

                <div class="space-y-4 p-4 bg-gray-50 rounded-lg">
                    <h5 class="font-semibold text-gray-800">1. On the Sender's Side (You):</h5>
                    <ul class="list-decimal list-inside text-gray-700 space-y-2 pl-4">
                        <li>You tap the special code (e.g., <code class="bg-gray-200 text-sm font-mono p-1 rounded">.-.-.</code> for Wink).</li>
                        <li>The code looks this up in `initializeMorseMap()` and finds the keyword <code class="bg-gray-200 text-sm font-mono p-1 rounded">"EMOJI_WINK"</code>.</li>
                        <li>To keep your screen clean, `updateDisplay()` sees this keyword and just shows <code class="bg-gray-200 text-sm font-mono p-1 rounded">[WINK]</code> on your display.</li>
                        <li>When you pause, `sendMessage()` sends the *full, raw message* with the hidden keyword (e.g., <code class="bg-gray-200 text-sm font-mono p-1 rounded">"HI EMOJI_WINK"</code>) to your friend.</li>
                    </ul>
                </div>

                <div class="space-y-4 p-4 bg-blue-50 rounded-lg">
                    <h5 class="font-semibold text-gray-800">2. On the Receiver's Side (Your Friend):</h5>
                    <ul class="list-decimal list-inside text-gray-700 space-y-2 pl-4">
                        <li>Their device receives the raw message <code class="bg-gray-200 text-sm font-mono p-1 rounded">"HI EMOJI_WINK"</code>.</li>
                        <li>This is the magic part: Before printing, the `loop()` checks the message. It hits a new `if` statement: <code class="bg-gray-200 text-sm font-mono p-1 rounded">if (receivedMessage == "EMOJI_WINK")</code>.</li>
                        <li>Because it's a match, the device *does not print* the text. Instead, it calls the special <code class="bg-gray-200 text-sm font-mono p-1 rounded">playWinkAnimation()</code> function.</li>
                        <li>That function takes control, clears the screen, and plays the <code class="bg-gray-200 text-sm font-mono p-1 rounded">(o o)</code> / <code class="bg-gray-200 text-sm font-mono p-1 rounded">(- -)</code> animation.</li>
                        <li>The exact same logic works for the Heart animation.</li>
                    </ul>
                </div>
            </div>

            <div id="tab-morse-table" class="morse-tab-content hidden space-y-8 fade-in">
            
                <h4 class="text-xl font-bold">Alphabet</h4>
                <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-x-4 gap-y-6 text-center">
                    <div><p class="font-bold text-lg">A</p><p class="text-gray-600 text-2xl tracking-widest">·−</p></div>
                    <div><p class="font-bold text-lg">B</p><p class="text-gray-600 text-2xl tracking-widest">−···</p></div>
                    <div><p class="font-bold text-lg">C</p><p class="text-gray-600 text-2xl tracking-widest">−·−·</p></div>
                    <div><p class="font-bold text-lg">D</p><p class="text-gray-600 text-2xl tracking-widest">−··</p></div>
                    <div><p class="font-bold text-lg">E</p><p class="text-gray-600 text-2xl tracking-widest">·</p></div>
                    <div><p class="font-bold text-lg">F</p><p class="text-gray-600 text-2xl tracking-widest">··−·</p></div>
                    <div><p class="font-bold text-lg">G</p><p class="text-gray-600 text-2xl tracking-widest">−−·</p></div>
                    <div><p class="font-bold text-lg">H</p><p class="text-gray-600 text-2xl tracking-widest">····</p></div>
                    <div><p class="font-bold text-lg">I</p><p class="text-gray-600 text-2xl tracking-widest">··</p></div>
                    <div><p class="font-bold text-lg">J</p><p class="text-gray-600 text-2xl tracking-widest">·−−−</p></div>
                    <div><p class="font-bold text-lg">K</p><p class="text-gray-600 text-2xl tracking-widest">−·−</p></div>
                    <div><p class="font-bold text-lg">L</p><p class="text-gray-600 text-2xl tracking-widest">·−··</p></div>
                    <div><p class="font-bold text-lg">M</p><p class="text-gray-600 text-2xl tracking-widest">−−</p></div>
                    <div><p class="font-bold text-lg">N</p><p class="text-gray-600 text-2xl tracking-widest">−·</p></div>
                    <div><p class="font-bold text-lg">O</p><p class="text-gray-600 text-2xl tracking-widest">−−−</p></div>
                    <div><p class="font-bold text-lg">P</p><p class="text-gray-600 text-2xl tracking-widest">·−−·</p></div>
                    <div><p class="font-bold text-lg">Q</p><p class="text-gray-600 text-2xl tracking-widest">−−·−</p></div>
                    <div><p class="font-bold text-lg">R</p><p class="text-gray-600 text-2xl tracking-widest">·−·</p></div>
                    <div><p class="font-bold text-lg">S</p><p class="text-gray-600 text-2xl tracking-widest">···</p></div>
                    <div><p class="font-bold text-lg">T</p><p class="text-gray-600 text-2xl tracking-widest">−</p></div>
                    <div><p class="font-bold text-lg">U</p><p class="text-gray-600 text-2xl tracking-widest">··−</p></div>
                    <div><p class="font-bold text-lg">V</p><p class="text-gray-600 text-2xl tracking-widest">···−</p></div>
                    <div><p class="font-bold text-lg">W</p><p class="text-gray-600 text-2xl tracking-widest">·−−</p></div>
                    <div><p class="font-bold text-lg">X</p><p class="text-gray-600 text-2xl tracking-widest">−··−</p></div>
                    <div><p class="font-bold text-lg">Y</p><p class="text-gray-600 text-2xl tracking-widest">−·−−</p></div>
                    <div><p class="font-bold text-lg">Z</p><p class="text-gray-600 text-2xl tracking-widest">−−··</p></div>
                </div>
                
                <h4 class="text-xl font-bold border-t border-gray-200 pt-8">Numbers</h4>
                <div class="grid grid-cols-2 sm:grid-cols-5 md:grid-cols-10 gap-x-4 gap-y-6 text-center">
                    <div><p class="font-bold text-lg">0</p><p class="text-gray-600 text-2xl tracking-widest">−−−−−</p></div>
                    <div><p class="font-bold text-lg">1</p><p class="text-gray-600 text-2xl tracking-widest">·−−−−</p></div>
                    <div><p class="font-bold text-lg">2</p><p class="text-gray-600 text-2xl tracking-widest">··−−−</p></div>
                    <div><p class="font-bold text-lg">3</p><p class="text-gray-600 text-2xl tracking-widest">···−−</p></div>
                    <div><p class="font-bold text-lg">4</p><p class="text-gray-600 text-2xl tracking-widest">····−</p></div>
                    <div><p class="font-bold text-lg">5</p><p class="text-gray-600 text-2xl tracking-widest">·····</p></div>
                    <div><p class="font-bold text-lg">6</p><p class="text-gray-600 text-2xl tracking-widest">−····</p></div>
                    <div><p class="font-bold text-lg">7</p><p class="text-gray-600 text-2xl tracking-widest">−−···</p></div>
                    <div><p class="font-bold text-lg">8</p><p class="text-gray-600 text-2xl tracking-widest">−−−··</p></div>
                    <div><p class="font-bold text-lg">9</p><p class="text-gray-600 text-2xl tracking-widest">−−−−·</p></div>
                </div>

                <h4 class="text-xl font-bold border-t border-gray-200 pt-8">Special Commands</h4>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-4 gap-y-6 text-center">
                    <div>
                        <p class="font-bold text-lg">Wink</p>
                        <p class="text-gray-500 text-sm">(EMOJI_WINK)</p>
                        <p class="text-gray-600 text-2xl tracking-widest">.-.-.</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">Heart</p>
                        <p class="text-gray-500 text-sm">(EMOJI_HEART)</p>
                        <p class="text-gray-600 text-2xl tracking-widest">.-..-.</p>
                    </div>
                </div>
                
            </div>

            <div id="tab-morse-updates" class="morse-tab-content hidden space-y-8 fade-in">
            
                <h4 class="text-xl font-bold">New Emojis (v17)</h4>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-4 gap-y-6 text-center">
                    <div>
                        <p class="font-bold text-lg">Laugh</p>
                        <p class="text-gray-500 text-sm">(EMOJI_LAUGH)</p>
                        <p class="text-gray-600 text-2xl tracking-widest">...-..</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">Angry</p>
                        <p class="text-gray-500 text-sm">(EMOJI_ANGRY)</p>
                        <p class="text-gray-600 text-2xl tracking-widest">-..-</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">Surprised</p>
                        <p class="text-gray-500 text-sm">(EMOJI_SURPRISED)</p>
                        <p class="text-gray-600 text-2xl tracking-widest">---..-</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">Skull</p>
                        <p class="text-gray-500 text-sm">(EMOJI_SKULL)</p>
                        <p class="text-gray-600 text-2xl tracking-widest">...-.-</p>
                    </div>
                </div>

                <h4 class="text-xl font-bold border-t border-gray-200 pt-8">New Prosigns &amp; Phrases</h4>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-4 gap-y-6 text-center">
                    <div>
                        <p class="font-bold text-lg">OK</p>
                        <p class="text-gray-600 text-2xl tracking-widest">-.-.-</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">YES</p>
                        <p class="text-gray-600 text-2xl tracking-widest">----</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">NO</p>
                        <p class="text-gray-600 text-2xl tracking-widest">...-.</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">HELP</p>
                        <p class="text-gray-600 text-2xl tracking-widest">.--.--</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">WAIT</p>
                        <p class="text-gray-600 text-2xl tracking-widest">..--.-</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">DONE</p>
                        <p class="text-gray-600 text-2xl tracking-wideset">-...--</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">COME</p>
                        <p class="text-gray-600 text-2xl tracking-widest">---...</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">GO</p>
                        <p class="text-gray-600 text-2xl tracking-widest">--...-</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg">READY</p>
                        <p class="text-gray-600 text-2xl tracking-widest">.-..--</p>
                    </div>
                </div>

            </div>
            </div>
    </div>
</div>
                            
                            <!-- 
                                =================================
                                SECTION: Build Summary
                                =================================
                                ** FIX APPLIED: Added 'hidden' class **
                            -->
                            <div id="doc-build-summary" class="doc-section space-y-8">
    <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
        <h3 class="text-2xl font-bold mb-4 flex items-center"><i data-feather="zap" class="w-6 h-6 mr-3 text-indigo-600"></i>What You'll Build (Quick View)</h3>
        <ul class="list-disc list-inside text-gray-700 space-y-2">
            <li>Two identical handheld units.</li>
            <li>Morse Key (1 button) to tap dots/dashes.</li>
            <li>Buzzer for audible feedback.</li>
            <li>OLED screen that shows decoded text.</li>
            <li>Units talk wirelessly (ESP-WIFI on ESP32)—no router needed.</li>
            <li>You can demo “old vs new”: tap Morse → receiver shows live text.</li>
        </ul>
    </div>

    <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
        <h3 class="text-2xl font-bold mb-4 flex items-center"><i data-feather="list" class="w-6 h-6 mr-3 text-indigo-600"></i>Bill of Materials (per unit)</h3>
        <p class="text-gray-600 mb-10">You'll need two sets of these components to build both handheld units.</p>

        <div class="space-y-12"> <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://www.espboards.dev/esp32/esp32doit-devkit-v1/" target="_blank" rel="noopener noreferrer">
                        <img src="https://joy-it.net/files/files/Produkte/SBC-NodeMCU-ESP32-C/SBC-NodeMCU-ESP32-C_01.png" alt="ESP32 Development Board" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">ESP32 DevKit (×1)</h4>
                    <p class="text-gray-700">This is the microcontroller, the "brain" of our project. A <strong>DOIT or WROOM-32</strong> model is perfect. Its built-in Wi-Fi is what we use for the router-free ESP-NOW communication.</p>
                </div>
            </div>

            <div class="flex flex-col md:flex-row-reverse items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://www.adafruit.com/product/326?srsltid=AfmBOorxicqHxyPkGnvKEZfpJxBLcXQi2oVMSl5M7CbO4fplWQI2sCvh" target="_blank" rel="noopener noreferrer">
                        <img src="https://www.az-delivery.de/cdn/shop/products/096-zoll-oled-ssd1306-display-i2c-128-x-64-pixel-kompatibel-mit-arduino-und-raspberry-pi-562312.jpg?v=1679397959&width=1500" alt="OLED Screen" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">0.96" I²C OLED (×1)</h4>
                    <p class="text-gray-700">This <strong>128x64 SSD1306</strong> display will show the decoded text. Make sure you get the <strong>I²C (or IIC)</strong> version, which only needs 4 pins (VCC, GND, SDA, SCL).</p>
                </div>
            </div>

            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://www.circuits-diy.com/push-button-led-circuit-basic-electronics/" target="_blank" rel="noopener noreferrer">
                        <img src="https://static-01.daraz.com.np/p/b5bbe8f281cca92ff4013aac837d47d6.jpg" alt="Momentary Pushbutton" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Momentary Pushbutton (×1)</h4>
                    <p class="text-gray-700">This will be our Morse code key. Any "normally open" (NO) momentary pushbutton will work. A 12mm button is a comfortable size.</p>
                </div>
            </div>

            <div class="flex flex-col md:flex-row-reverse items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://www.circuitbasics.com/what-is-a-buzzer/" target="_blank" rel="noopener noreferrer">
                        <img src="https://emariete.com/wp-content/uploads/2020/12/zumbador.png" alt="Active Buzzer" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Active Buzzer (×1)</h4>
                    <p class="text-gray-700">This provides the "beep" feedback. Make sure to get an <strong>active buzzer</strong> (it usually has a sticker on top) that works with 3.3V or 5V. It will have a '+' pin and a '–' pin.</p>
                </div>
            </div>
            
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://learn.sparkfun.com/tutorials/how-to-use-a-breadboard/all" target="_blank" rel="noopener noreferrer">
                        <img src="https://sfxpcb.com/wp-content/uploads/2023/09/Breadboard.jpg" alt="Solderless Breadboard" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Breadboard (×1)</h4>
                    <p class="text-gray-700">A standard 400-point or 830-point solderless breadboard is perfect for prototyping the circuit without any soldering.</p>
                </div>
            </div>

            <div class="flex flex-col md:flex-row-reverse items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://en.wikipedia.org/wiki/Jump_wire" target="_blank" rel="noopener noreferrer">
                        <img src="https://electronicssecret.wordpress.com/wp-content/uploads/2022/07/image-1.png" alt="Jumper Wires" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Jumper Wires</h4>
                    <p class="text-gray-700">A set of male-to-male (M-M) and male-to-female (M-F) jumper wires will be needed to connect everything. The M-F wires are useful for the OLED and buzzer pins.</p>
                </div>
            </div>
            
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="md:w-2/5 w-full">
                    <a href="https://ledlenser.com/en/advisor/what-is-a-power-bank/" target="_blank" rel="noopener noreferrer">
                        <img src="https://images.philips.com/is/image/philipsconsumer/506144bc684c46e3a62fb0ce00a6d411?$pnglarge$&wid=960" alt="USB Power Bank" class="rounded-lg shadow-md w-full object-contain h-48 bg-gray-100">
                    </a>
                </div>
                <div class="md:w-3/5 w-full">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">Power Source (×1)</h4>
                    <p class="text-gray-700">A USB power bank or a standard 5V phone charger with a Micro-USB cable (to match the ESP32) will be needed to power each unit.</p>
                </div>
            </div>

        </div>
    </div>


    <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
            <h3 class="text-2xl font-bold mb-4 flex items-center"><i data-feather="clock" class="w-6 h-6 mr-3 text-indigo-600"></i>Morse Timing</h3>
            <ul class="list-disc list-inside text-gray-700 space-y-2">
                <li>Dit (•) length = 120 ms (≈10–12 WPM)</li>
                <li>Dash (—) ≈ 3× dit</li>
                <li>Gap between symbols = 1× dit</li>
                <li>Gap between letters = 3× dit</li>
                <li>Gap between words = 7× dit</li>
            </ul>
        </div>
        <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
            <h3 class="text-2xl font-bold mb-4 flex items-center"><i data-feather="archive" class="w-6 h-6 mr-3 text-indigo-600"></i>Enclosure</h3>
            <ul class="list-disc list-inside text-gray-700 space-y-2">
                <li>Top panel cutouts: OLED (28×14 mm)</li>
                <li>Internal pillars (M2.5 standoffs)</li>
                <li>Dimensions: 110×65×30 mm</li>
                <li>Front label: “Smart Telegraph — Unit A/B”</li>
            </ul>
        </div>
    </div>

    <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
        <h3 class="text-2xl font-bold mb-4 flex items-center"><i data-feather="tool" class="w-6 h-6 mr-3 text-indigo-600"></i>Build Steps</h3>
        <ol class="list-decimal list-inside text-gray-700 space-y-2">
            <li>Breadboard one unit and test the OLED, button, and buzzer.</li>
            <li>Flash code with ROLE = SENDER (Unit A) and again with ROLE = RECEIVER (Unit B).</li>
            <li>Power both—tap on A → text appears on B; B’s buzzer should beep per character.</li>
            <li>Make a second pass to tidy wiring, move to perfboard, or mount in a case.</li>
        </ol>
    </div>
</div>
                            <!-- 
                                =================================
                                SECTION: Website Designing
                                =================================
                            -->

                            <div id="doc-website-design" class="doc-section hidden bg-white p-8 rounded-lg shadow-lg fade-in space-y-8">
    
    <div>
        <h3 class="text-2xl font-bold mb-4 flex items-center">
            <i data-feather="layout" class="w-6 h-6 mr-3 text-indigo-600"></i>Website Designing
        </h3>
        <p class="text-gray-700 mb-6">
            Here's an overview of the website design process, from initial concepts to the final layout, and how we brought the project to life online.
        </p>
    </div>
    
    <div class="border-t border-gray-200 pt-6">
        <h4 class="text-xl font-semibold mb-2">
            Our Goals for the Website
        </h4>
        <p class="text-gray-700 leading-relaxed">
            From the beginning, our goal was to create more than just a landing page. We wanted a clean, professional, and easy-to-navigate site that would serve as a central hub for our project. Our main objectives were to:
        </p>
        <ul class="list-disc list-inside text-gray-700 space-y-2 mt-4">
            <li>Share our team's journey and story with viewers.</li>
            <li>Clearly and thoroughly document our technical work, from circuit design to code.</li>
            <li>Provide a transparent, real-time look at our progress through the interactive roadmap.</li>
            <li>Build a platform that was both informative for visitors and a useful tool for our team.</li>
        </ul>
    </div>
    
    <div class="border-t border-gray-200 pt-6">
        <h4 class="text-xl font-semibold mb-2">
            Web designing - 7th November:
        </h4>
        <p class="text-gray-700 mb-4 leading-relaxed">
            Today, a technical issue was encountered where one of the key pages on our website, previously containing the project's roadmaps, has gone missing. The roadmaps served as a crucial tool for our team, enabling us to track project progress and provide transparent updates to external viewers. The absence of this page has temporarily disrupted our ability to display the current status of the project. Tenzing Jangsel had looked into the code to identify the problem, and had changed the API in the database for the backend code, which in turn fixed the problem.
        </p>
        <img src="https://i.ibb.co/FqfXN7qr/Screenshot-2025-11-10-101224.png" alt="Roadmap problem" class="rounded-lg shadow-md w-full mb-2">
        <p class="text-sm text-gray-600 italic text-center">The problem encountered with the roadmap page.</p>
    </div>
    
    <div class="border-t border-gray-200 pt-6">
        <h4 class="text-xl font-semibold mb-2">
            Roadmap API Solution
        </h4>
        <p class="text-gray-700 mb-4 leading-relaxed">
            Following the roadmap issue, we investigated and found the root cause: the active Firebase project (the 'firecloud account') had been switched. This mismatch meant the website was trying to read data from the wrong database. The solution involved updating the Firebase API configuration keys within the website's HTML code to point to the correct, active project, which immediately restored the roadmap data.
        </p>
        <img src="https://i.ibb.co/PsRQ68jW/Screenshot-2025-11-10-101429.png" alt="API fix in code" class="rounded-lg shadow-md w-full mb-2">
        <p class="text-sm text-gray-600 italic text-center">Updating the Firebase configuration to fix the data link.</p>
    </div>
    
    <div class="border-t border-gray-200 pt-6">
        <h4 class="text-xl font-semibold mb-2">Implementing Firebase Google Login</h4>
        <p class="text-gray-700 mb-4 leading-relaxed">
            Our first step for the website was implementing user authentication using Firebase's Google Login system. This would allow users to sign in to ask questions on the contact page. However, we immediately ran into an 'auth/operation-not-allowed' error, which blocked any login attempts.
        </p>
        <img src="https://i.ibb.co/Y46rg6CM/Screenshot-2025-11-10-163718.png" alt="Firebase auth error" class="rounded-lg shadow-md w-full mb-2">
        <p class="text-sm text-gray-600 italic text-center">The initial 'operation not allowed' error from Firebase.</p>
    </div>

    <div class="border-t border-gray-200 pt-6">
        <h4 class="text-xl font-semibold mb-2">Troubleshooting: Authorizing the Domain</h4>
        <p class="text-gray-700 mb-4 leading-relaxed">
            After investigating the Firebase console, we discovered the solution. The error was caused by our local development domain (<code>127.0.0.1</code>) not being explicitly authorized to handle authentication requests.
        </p>
        <img src="https://i.ibb.co/PzF8CVL2/Screenshot-2025-11-10-163737.png" alt="Firebase authorized domains setting" class="rounded-lg shadow-md w-full mb-2">
        <p class="text-sm text-gray-600 italic text-center">We had to add our local domain to the 'Authorized domains' list.</p>
    </div>

    <div class="border-t border-gray-200 pt-6">
        <h4 class="text-xl font-semibold mb-2">Success: Login System Works!</h4>
        <p class="text-gray-700 mb-4 leading-relaxed">
            By simply adding our development domain to the 'Authorized domains' list in the Firebase Authentication settings, the Google Sign-in popup appeared, and the login system worked perfectly. This was a key step in enabling user interaction on our site.
        </D2%80%9D>
        <img src="https://i.ibb.co/ccmMjpxX/Screenshot-2025-11-10-163748.png" alt="Google login popup working" class="rounded-lg shadow-md w-full mb-2">

        <p class="text-sm text-gray-600 italic text-center">The Google Sign-in flow now works as expected.</p>
    <div class="border-t border-gray-200 pt-6"></div>
        <h4 class="text-xl font-semibold mb-2">Social Links now work!</h4>
        <p class="text-gray-700 mb-4 leading-relaxed">
            Although we had already added the option to make inquiries in the contact page of our website, we decided it would also be good for people to be able to directly contact us and get to know about our project and the team members in real-time. Therefore, we have added our social links in the footer section of our website. 
When we started designing our website, in the home page, the option to access our social links was already available. However, since we did not have official social media accounts, clicking on the option would open a tab saying that the feature was still under construction.


        </D2%80%9D>
        <img src="https://i.ibb.co/9kzFPr0S/Screenshot-2025-11-11-153311.png" alt="Google login popup working" class="rounded-lg shadow-md w-full mb-2">
        <p class="text-gray-700 mb-4 leading-relaxed">
            Today, we have created our social media accounts, allowing us to communicate with interested individuals more freely without those individuals having to wait for a response.
For our socials, we have created a LinkedIn account, and an Instagram account
        <p class="text-sm text-gray-600 italic text-center">The Social Links as of now will work</p>
    </div>
    
</div>

<!-- ======================================================= -->
<!--             START: SOURCE CODE SECTION                -->
<!-- ======================================================= -->
<!-- ======================================================= -->
<!--             START: SOURCE CODE SECTION                -->
<!-- ======================================================= -->
<div id="doc-code" class="doc-section hidden bg-white p-8 rounded-lg shadow-lg fade-in space-y-8">

    <h3 class="text-2xl font-bold flex items-center">
        <i data-feather="code" class="w-6 h-6 mr-3 text-indigo-600"></i>
        Source Code & Replicate
    </h3>

    <div class="space-y-4">
        <h4 class="text-xl font-bold text-gray-800">Bill of Materials (BOM)</h4>
        <p class="text-gray-700">To build this project, you only need 4 core components:</p>
        <ul class="list-disc list-inside text-gray-700 space-y-2">
            <li><strong>1x</strong> ESP32 Microcontroller</li>
            <li><strong>1x</strong> SSD1306 0.96" I2C OLED Display (128x64)</li>
            <li><strong>1x</strong> Piezo Buzzer (Passive or Active)</li>
            <li><strong>1x</strong> Push Button (Tactile Switch)</li>
        </ul>
    </div>

    <div class="border-t border-gray-200 pt-8 space-y-4">
        <div class="flex justify-between items-center">
            <h4 class="text-xl font-bold text-gray-800">Arduino Code (.ino)</h4>
            <button onclick="copyActiveArduinoCode()" id="copy-code-btn" class="bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg flex items-center gap-2 transition-all duration-150 hover:bg-gray-300">
                <i data-feather="copy" class="w-4 h-4"></i>
                <span>Copy Code</span>
            </button>
        </div>

        <div class="flex border-b border-gray-200">
            <button id="tab-btn-v17" class="tab-btn px-4 py-2 font-medium text-indigo-600 border-b-2 border-indigo-600">
                v17 (Visual Emojis)
            </button>
            <button id="tab-btn-v18" class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700">
                v18 (Blind Mode)
            </button>
        </div>

        <div id="tab-panel-v17" class="tab-panel">
            <pre class="rounded-lg" style="max-height: 600px; overflow-x: auto;">
<code id="arduino-code-v17" class="language-cpp">
/*
 * Sketch: Morse_Transceiver_MQTT_v17
 * (Version 17 - Added Laugh, Angry, Surprised, Skull)
 */

#include &lt;Wire.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;WiFi.h&gt;
#include &lt;PubSubClient.h&gt;

// ---
// --- 1. ! REQUIRED: EDIT THIS SECTION ! ---
// ---
const char* WIFI_SSID = "DGI";
const char* WIFI_PASSWORD = "dgi@2024!";
// ---
// --- 2. ! REQUIRED: MAKE THIS TOPIC UNIQUE ! ---
// ---
const char* MQTT_TOPIC = "morse/tj-project-final/999"; // &lt;-- Use a new, unique topic
// ---

// --- MQTT Definitions ---
const char* MQTT_BROKER = "broker.hivemq.com";
const int   MQTT_PORT = 1883;
String clientID = "MorseESP32-";
WiFiClient espClient;
PubSubClient mqttClient(espClient);

// ... (The rest of your original v17 code from the prompt) ...
// ... (I'm truncating it here for brevity, but you would) ...
// ... (paste your *entire* original v17 code block here) ...

void updateDisplay() {
  display.clearDisplay();
  display.setCursor(0, 0);

  display.setTextSize(2);
  display.print("&gt;");
  display.println(currentMorse);

  display.setTextSize(1);
  display.println("");
  display.setCursor(0, 24);
  display.println("Message:");
  
  String displayMessage = translatedMessage;
  displayMessage.replace("EMOJI_WINK", "[WINK]");
  displayMessage.replace("EMOJI_HEART", "[&lt;3]");

  // --- NEW: Add text previews for the new emojis ---
  displayMessage.replace("EMOJI_LAUGH", "[HAHA]");
  displayMessage.replace("EMOJI_ANGRY", "[ANGRY]");
  displayMessage.replace("EMOJI_SURPRISED", "[SURPRISED]");
  displayMessage.replace("EMOJI_SKULL", "[SKULL]");
  
  displayMessage.replace(String(char(0)), "");
  
  display.setTextSize(2);
  display.setTextWrap(true);
  display.println(displayMessage);

  display.display();
}
</code>
            </pre>
        </div>

        <div id="tab-panel-v18" class="tab-panel hidden">
            <pre class="rounded-lg" style="max-height: 600px; overflow-x: auto;">
<code id="arduino-code-v18" class="language-cpp">
/*
 * Sketch: Morse_Transceiver_MQTT_v18
 * (Version 18 - Added Blind Mode)
 * * This version adds an accessibility mode for visually
 * impaired users. On startup, holding the button
 * selects "Blind Mode," which plays all incoming
 * messages as audible Morse code.
 */

#include &lt;Wire.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;WiFi.h&gt;
#include &lt;PubSubClient.h&gt;


const char* WIFI_SSID = "DGI";
const char* WIFI_PASSWORD = "dgi@2024!";
const char* MQTT_TOPIC = "morse/tj-project-final/999";

const char* MQTT_BROKER = "broker.hivemq.com";
const int   MQTT_PORT = 1883;
String clientID = "MorseESP32-";
WiFiClient espClient;
PubSubClient mqttClient(espClient);


const int MORSE_BUTTON_PIN = 32;
const int BUZZER_PIN = 26;
#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET    -1
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &amp;Wire, OLED_RESET);

std::map&lt;std::string, String&gt; morseMap;
String currentMorse = "";
String translatedMessage = "";


unsigned long buttonPressTime = 0;
unsigned long lastReleaseTime = 0;
unsigned long lastDebounceTime = 0;
const long debounceTime = 50;
const long dashThreshold = 250;
const long letterTimeout = 1000;
const long wordTimeout = 2000;
const long resetTimeout = 5000;


int buttonState = HIGH;
int lastButtonState = HIGH;
bool letterCommitted = false;
bool wordCommitted = false;


const int buzzerFrequency = 800;
const int notifyFrequency = 1200;
String receivedMessage = "";
volatile bool newMessage = false;
bool messageIsDisplaying = false;
// Used for TEXT messages only
unsigned long messageDisplayStartTime = 0;
const long messageDisplayTime = 5000;
// --- NEW: Blind Mode Vars ---
bool isBlindMode = false;
std::map&lt;char, std::string&gt; reverseMorseMap;
// Durations for Morse playback (based on your dashThreshold)
const int dotDuration = 250;
// Same as dashThreshold for consistency
const int dashDuration = dotDuration * 3;
const int interElementPause = dotDuration;
// Pause between dots/dashes
const int interLetterPause = dotDuration * 3; // Pause between letters
const int interWordPause = dotDuration * 7;
// Pause between words
// --- End Blind Mode Vars ---


void initializeMorseMap();
void translateAndClear();
void updateDisplay();
bool sendMessage();
void setup_wifi();
void mqtt_callback(char* topic, byte* payload, unsigned int length);
void reconnect_mqtt();
void playWinkAnimation();
void playHeartAnimation();
void playLaughAnimation();
void playAngryAnimation();
void playSurprisedAnimation();
void playSkullAnimation();

// --- NEW: Blind Mode Functions ---
void initializeReverseMorseMap();
void playMorseCode(std::string morseCode);
void playMorseString(String message);
// --- End Blind Mode Functions ---


void setup_wifi() {
  delay(10);
  Serial.println();
  Serial.print("Connecting to ");
  Serial.println(WIFI_SSID);

  display.clearDisplay();
  display.setTextSize(1);
  display.setCursor(0,0);
  display.println("Connecting to WiFi");
  display.println(WIFI_SSID);
  display.display();
  
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);

  int retries = 0;
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
    display.print(".");
    display.display();
    if (retries++ &gt; 20) {
      Serial.println("\nFailed to connect to WiFi!");
      display.clearDisplay();
      display.setCursor(0,0);
      display.println("WIFI FAILED!");
      display.println("Check credentials.");
      display.display();
      while(true);
    }
  }

  Serial.println("");
  Serial.println("WiFi connected");
  Serial.print("IP address: ");
  Serial.println(WiFi.localIP());
}

void mqtt_callback(char* topic, byte* payload, unsigned int length) {
  char buffer[length + 1];
  memcpy(buffer, payload, length);
  buffer[length] = '\0';
  String fullMessage = String(buffer);

  Serial.print("Full msg received: "); Serial.println(fullMessage);

  int colonIndex = fullMessage.indexOf(':');
  if (colonIndex == -1) {
    Serial.println("Ignoring malformed message (no colon).");
    return;
  }

  String senderID = fullMessage.substring(0, colonIndex);
  String messageContent = fullMessage.substring(colonIndex + 1);
  if (senderID == clientID) {
    Serial.println("This is my own message (echo). Ignoring.");
    return;
  }

  receivedMessage = messageContent;
  newMessage = true;
  
  Serial.print("Message from OTHER: "); Serial.println(receivedMessage);
}

void reconnect_mqtt() {
  while (!mqttClient.connected()) {
    Serial.print("Attempting MQTT connection...");
    display.clearDisplay();
    display.setCursor(0,0);
    display.setTextSize(1);
    display.println("Connecting to MQTT");
    display.println(MQTT_BROKER);
    display.display();
    
    if (mqttClient.connect(clientID.c_str())) {
      Serial.println("CONNECTED!");
      display.println("CONNECTED!");
      display.display();
      delay(500);
      
      Serial.print("Subscribing to topic: ");
      Serial.println(MQTT_TOPIC);
      if(mqttClient.subscribe(MQTT_TOPIC)) {
        Serial.println("Subscription successful!");
      } else {
        Serial.println("Subscription FAILED!");
      }
      
      updateDisplay();
    } else {
      Serial.print("FAILED, rc=");
      Serial.print(mqttClient.state());
      Serial.println(" try again in 5 seconds");
      
      display.println("FAILED!");
      display.display();
      delay(5000);
    }
  }
}


void setup() {
  Serial.begin(115200);

  clientID += String(random(0xffff), HEX);
  Serial.print("My client ID is: ");
  Serial.println(clientID);

  pinMode(MORSE_BUTTON_PIN, INPUT_PULLUP);
  pinMode(BUZZER_PIN, OUTPUT);

  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) {
    Serial.println(F("SSD1306 allocation failed"));
    for(;;);
  }
  display.clearDisplay();
  display.setTextSize(1);
  display.setTextColor(SSD1306_WHITE);
  // --- NEW: MODE SELECTION ---
  display.setCursor(0,0);
  display.println("SELECT MODE:");
  display.println("");
  display.println("Click . (DOT)");
  display.println("for NORMAL");
  display.println("");
  display.println("Hold - (DASH)");
  display.println("for BLIND");
  display.display();

  bool modeSelected = false;
  while (!modeSelected) {
    int reading = digitalRead(MORSE_BUTTON_PIN);
    if (reading == LOW) { // Button is pressed
      unsigned long pressTime = millis();
      tone(BUZZER_PIN, buzzerFrequency); // Audio feedback
      
      // Wait for the button to be released
      while (digitalRead(MORSE_BUTTON_PIN) == LOW) {
        delay(10);
// small delay
      }
      noTone(BUZZER_PIN);
      unsigned long pressDuration = millis() - pressTime;
      
      // Check if it was a dash (long press)
      if (pressDuration &gt;= dashThreshold) {
        isBlindMode = true;
        modeSelected = true;
        Serial.println("BLIND Mode Selected.");
      } 
      // Check if it was a dot (short press)
      else if (pressDuration &gt; debounceTime) {
        isBlindMode = false;
        modeSelected = true;
        Serial.println("NORMAL Mode Selected.");
      }
    }
  }

  // Show confirmation on display
  display.clearDisplay();
  display.setCursor(0,0);
  display.println("Mode Selected:");
  display.setTextSize(2);
  if (isBlindMode) {
    display.println("BLIND");
  } else {
    display.println("NORMAL");
  }
  display.display();
  delay(1500); // Show for 1.5 seconds
  
  // --- END MODE SELECTION ---


  // --- Original setup continues... ---
  display.clearDisplay();
  display.setTextSize(1);
  display.setTextColor(SSD1306_WHITE);
  display.setCursor(0,0);
  display.println("Morse Transceiver");
  display.println("v18 (Blind Mode)");
  display.display();
  delay(1000);

  setup_wifi();
  
  mqttClient.setServer(MQTT_BROKER, MQTT_PORT);
  mqttClient.setCallback(mqtt_callback);

  initializeMorseMap();
  initializeReverseMorseMap();
// &lt;-- ADDED
  updateDisplay();
  lastReleaseTime = millis();
}

void loop() {
  if (!mqttClient.connected()) {
    reconnect_mqtt();
  }
  mqttClient.loop();
  
  // This check is for timing out TEXT messages in NORMAL mode.
  if (messageIsDisplaying &amp;&amp; !isBlindMode &amp;&amp; (millis() - messageDisplayStartTime &gt; messageDisplayTime)) {
    messageIsDisplaying = false;
    updateDisplay();
    lastReleaseTime = millis();
  }

  if (newMessage) {
    newMessage = false;
    
    Serial.println("Playing notification sound!");
    tone(BUZZER_PIN, notifyFrequency, 100);
    delay(150);
    tone(BUZZER_PIN, notifyFrequency, 100);

    currentMorse = "";
    translatedMessage = "";
    // --- NEW: MODE-BASED LOGIC ---
    if (!isBlindMode) {
      
      // --- This is the ORIGINAL logic for NORMAL (visual) mode ---
      
      if (receivedMessage == "EMOJI_WINK") {
        Serial.println("Received EMOJI_WINK, playing animation...");
        playWinkAnimation();
        updateDisplay();
        lastReleaseTime = millis();
        
      } else if (receivedMessage == "EMOJI_HEART") {
        Serial.println("Received EMOJI_HEART, playing animation...");
        playHeartAnimation();
        updateDisplay();
        lastReleaseTime = millis();
        
      } else if (receivedMessage == "EMOJI_LAUGH") {
        Serial.println("Received EMOJI_LAUGH, playing animation...");
        playLaughAnimation();
        updateDisplay();
        lastReleaseTime = millis();
        
      } else if (receivedMessage == "EMOJI_ANGRY") {
        Serial.println("Received EMOJI_ANGRY, playing animation...");
        playAngryAnimation();
        updateDisplay();
        lastReleaseTime = millis();
        
      } else if (receivedMessage == "EMOJI_SURPRISED") {
        Serial.println("Received EMOJI_SURPRISED, playing animation...");
        playSurprisedAnimation();
        updateDisplay();
        lastReleaseTime = millis();
        
      } else if (receivedMessage == "EMOJI_SKULL") {
        Serial.println("Received EMOJI_SKULL, playing animation...");
        playSkullAnimation();
        updateDisplay();
        lastReleaseTime = millis();
        
      } else {
        Serial.println("Received text, displaying for 5s...");
        display.clearDisplay();
        display.setCursor(0, 0);
        display.setTextSize(1);
        display.println("MSG RECEIVED:");
        display.setTextSize(2);
        display.setTextWrap(true);
        display.println(receivedMessage);
        display.display();
        
        messageIsDisplaying = true;
        messageDisplayStartTime = millis();
      }
      
    } else {
      
      // --- This is the NEW logic for BLIND (audio) mode ---
      
      Serial.print("Blind Mode: Received message: ");
      Serial.println(receivedMessage);

      // We must set this flag to TRUE to prevent the user from
      // typing new morse code *while* the audio is playing.
      messageIsDisplaying = true;
      
      String messageToPlay;
      
      // Translate Emojis into simple words for audio playback
      if (receivedMessage == "EMOJI_WINK") {
        messageToPlay = "WINK";
      } else if (receivedMessage == "EMOJI_HEART") {
        messageToPlay = "HEART";
      } else if (receivedMessage == "EMOJI_LAUGH") {
        messageToPlay = "LAUGH";
      } else if (receivedMessage == "EMOJI_ANGRY") {
        messageToPlay = "ANGRY";
      } else if (receivedMessage == "EMOJI_SURPRISED") {
        messageToPlay = "SURPRISED";
      } else if (receivedMessage == "EMOJI_SKULL") {
        messageToPlay = "SKULL";
      } else {
        messageToPlay = receivedMessage;
// Play the text as-is
      }
      
      Serial.print("Playing back as Morse: ");
      Serial.println(messageToPlay);

      // Show a "busy" message on the display
      display.clearDisplay();
      display.setCursor(0,0);
      display.setTextSize(1);
      display.println("BLIND MODE");
      display.println("Receiving...");
      display.display();

      // Play the morse string audio
      playMorseString(messageToPlay);
      
      Serial.println("Playback finished.");
      // Playback is done, so we can clear the flag.
      // This allows the user to start typing again.
      messageIsDisplaying = false; 
      updateDisplay(); // Resets display to the input screen
      lastReleaseTime = millis();
    }
    // --- END NEW LOGIC ---
  }

  // This is the morse INPUT logic.
  // The 'if (!messageIsDisplaying)' wrapper is now CRITICAL.
  // It prevents this code from running while an animation is playing
  // OR while our new audio playback is happening.
  if (!messageIsDisplaying) {
    int reading = digitalRead(MORSE_BUTTON_PIN);
    if (reading != lastButtonState) {
      lastDebounceTime = millis();
    }
    lastButtonState = reading;
    if ((millis() - lastDebounceTime) &gt; debounceTime) {
      if (reading != buttonState) {
        buttonState = reading;
        if (buttonState == LOW) {
          Serial.println("Red Morse Button (32) PRESSED");
          buttonPressTime = millis();
          letterCommitted = false;
          wordCommitted = false;
          tone(BUZZER_PIN, buzzerFrequency);
        } else {
          noTone(BUZZER_PIN);
          unsigned long pressDuration = millis() - buttonPressTime;
          if (pressDuration &gt;= dashThreshold) {
            currentMorse += "-";
          } else {
            currentMorse += ".";
          }
          updateDisplay();
          lastReleaseTime = millis();
        }
      }
    }

    if (buttonState == HIGH) {
      unsigned long timeSinceRelease = millis() - lastReleaseTime;
      if (timeSinceRelease &gt; resetTimeout &amp;&amp; translatedMessage.length() &gt; 0) {
        Serial.println("Reset Timeout (5s)");
        translatedMessage = "";
        currentMorse = "";
        updateDisplay();
        letterCommitted = true;
        wordCommitted = true;
      }
      else if (timeSinceRelease &gt; wordTimeout &amp;&amp; !wordCommitted) {
        if (currentMorse.length() &gt; 0) {
          translateAndClear();
        }
        if (translatedMessage.length() &gt; 0) {
          Serial.println("Word Timeout (2s)... ADDING SPACE AND SENDING");
          if (translatedMessage.endsWith(" ") || translatedMessage.endsWith(String(char(0)))) {
            // ...
          } else {
             translatedMessage += " ";
          }
          
          bool sentOK = sendMessage();
          if (sentOK) {
            display.setCursor(0, 56);
            display.print("...SENT!");
          } else {
            display.setCursor(0, 56);
            display.print("...FAIL!");
          }
          display.display();
          delay(500);
        }
        updateDisplay();
        wordCommitted = true;
        letterCommitted = true;
      }
      else if (timeSinceRelease &gt; letterTimeout &amp;&amp; !letterCommitted) {
        if (currentMorse.length() &gt; 0) {
          Serial.println("Letter Timeout (1s)");
          translateAndClear();
          updateDisplay();
        }
        letterCommitted = true;
      }
    }
  }
} // --- END OF loop() ---



void playWinkAnimation() {

  int y = 20;
// Centered Y
  
  // Play the animation 4 times
  for (int i = 0; i &lt; 4; i++) {
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(33, y); // Centered X for "(o o)"
    display.print("(o o)");
    display.display();
    delay(300);
    
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(33, y);
    display.print("(- -)");
    display.display();
    delay(200);
  }
  
  delay(500);
}

void playHeartAnimation() {

  for (int i = 0; i &lt; 4; i++) {

    display.clearDisplay();
    display.fillCircle(58, 28, 5, SSD1306_WHITE); // Left lobe
    display.fillCircle(70, 28, 5, SSD1306_WHITE);
// Right lobe
    display.fillTriangle(53, 30, 75, 30, 64, 42, SSD1306_WHITE); // Point
    display.display();
    delay(250);
// --- Frame 2: Big Heart ---
    display.clearDisplay();
    display.fillCircle(55, 25, 8, SSD1306_WHITE);
// Left lobe
    display.fillCircle(73, 25, 8, SSD1306_WHITE);
// Right lobe
    display.fillTriangle(47, 30, 81, 30, 64, 48, SSD1306_WHITE); // Point
    display.display();
    delay(250);
  }
}

// --- NEW ANIMATION FUNCTIONS ---

void playLaughAnimation() {
  // A simple text-based laughing animation
  int y = 20;
// Centered Y
  
  // Play the animation 5 times
  for (int i = 0; i &lt; 5; i++) {
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(33, y); // Centered X
    display.print("(&gt; &lt;)");
    display.display();
    delay(200);
    
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(33, y);
// Centered X
    display.print("(v v)");
    display.display();
    delay(200);
  }
  
  delay(500);
// Hold last frame
}

void playAngryAnimation() {
  // A simple text-based vibrating angry face
  int y = 20;
// Centered Y
  
  // Play the animation 6 times
  for (int i = 0; i &lt; 6; i++) {
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(30, y); // Centered X
    display.print("(&gt;_&lt;)");
    display.display();
    delay(150);
    
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(30, y+2);
// Vibrate down
    display.print("(&gt;O&lt;)");
    display.display();
    delay(150);
  }
  
  delay(500);
// Hold last frame
}

void playSurprisedAnimation() {
  // A simple text-based surprised face
  int y = 20;
// Centered Y
  
  // Play the animation 3 times
  for (int i = 0; i &lt; 3; i++) {
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(30, y); // Centered X
    display.print("(o_o)");
    display.display();
    delay(400);
    
    display.clearDisplay();
    display.setTextSize(3);
    display.setCursor(30, y);
// Centered X
    display.print("(O_O)");
    display.display();
    delay(300);
  }
  
  delay(500);
// Hold last frame
}

void playSkullAnimation() {
  // A shape-based chattering skull
  
  // Play the animation 5 times
  for (int i = 0; i &lt; 5; i++) {
    // --- Frame 1: Mouth Closed ---
    display.clearDisplay();
    display.fillRoundRect(50, 15, 28, 22, 6, SSD1306_WHITE); // Cranium
    display.fillRect(52, 37, 24, 8, SSD1306_WHITE);
// Jaw
    display.fillCircle(57, 26, 5, SSD1306_BLACK);           // Left eye
    display.fillCircle(71, 26, 5, SSD1306_BLACK);
// Right eye
    display.fillTriangle(62, 32, 66, 32, 64, 37, SSD1306_BLACK); // Nose
    display.display();
    delay(200);
// --- Frame 2: Mouth Open ---
    display.clearDisplay();
    display.fillRoundRect(50, 15, 28, 22, 6, SSD1306_WHITE);
// Cranium
    display.fillRect(52, 42, 24, 8, SSD1306_WHITE);
// Jaw (moved down)
    display.fillCircle(57, 26, 5, SSD1306_BLACK);
// Left eye
    display.fillCircle(71, 26, 5, SSD1306_BLACK);
// Right eye
    display.fillTriangle(62, 32, 66, 32, 64, 37, SSD1306_BLACK); // Nose
    display.display();
    delay(200);
  }
}

// ---
// --- NEW BLIND MODE AUDIO FUNCTIONS ---
// ---

/**
 * Populates the reverse map for text-to-morse translation.
 */
void initializeReverseMorseMap() {
    reverseMorseMap['A'] = ".-";   reverseMorseMap['B'] = "-...";
    reverseMorseMap['C'] = "-.-."; reverseMorseMap['D'] = "-..";
    reverseMorseMap['E'] = ".";    reverseMorseMap['F'] = "..-.";
    reverseMorseMap['G'] = "--.";  reverseMorseMap['H'] = "....";
    reverseMorseMap['I'] = "..";   reverseMorseMap['J'] = ".---";
    reverseMorseMap['K'] = "-.-";  reverseMorseMap['L'] = ".-..";
    reverseMorseMap['M'] = "--";   reverseMorseMap['N'] = "-.";
    reverseMorseMap['O'] = "---";  reverseMorseMap['P'] = ".--.";
    reverseMorseMap['Q'] = "--.-"; reverseMorseMap['R'] = ".-.";
    reverseMorseMap['S'] = "...";  reverseMorseMap['T'] = "-";
    reverseMorseMap['U'] = "..-";  reverseMorseMap['V'] = "...-";
    reverseMorseMap['W'] = ".--";  reverseMorseMap['X'] = "-..-";
    reverseMorseMap['Y'] = "-.--"; reverseMorseMap['Z'] = "--..";
    reverseMorseMap['0'] = "-----"; reverseMorseMap['1'] = ".----";
    reverseMorseMap['2'] = "..---"; reverseMorseMap['3'] = "...--";
    reverseMorseMap['4'] = "....-"; reverseMorseMap['5'] = ".....";
    reverseMorseMap['6'] = "-...."; reverseMorseMap['7'] = "--...";
    reverseMorseMap['8'] = "---.."; reverseMorseMap['9'] = "----.";
}

/**
 * Plays a single morse code sequence (e.g., ".-") on the buzzer.
 */
void playMorseCode(std::string morseCode) {
  Serial.print("Playing: ");
  Serial.println(morseCode.c_str());
  
  for (char c : morseCode) {
    // Play the tone for the dot or dash duration
    if (c == '.') {
      tone(BUZZER_PIN, buzzerFrequency);
      delay(dotDuration);
    } else if (c == '-') {
      tone(BUZZER_PIN, buzzerFrequency);
      delay(dashDuration);
    }
    noTone(BUZZER_PIN); // Stop the tone
    
    // Wait for the pause between elements
    delay(interElementPause);
  }
}

/**
 * Translates a text string into morse audio.
 */
void playMorseString(String message) {
  message.toUpperCase();
// Our map only has uppercase keys
  
  for (int i = 0; i &lt; message.length(); i++) {
    char c = message.charAt(i);
    if (c == ' ') {
      // It's a space, wait for the word pause
      // (We subtract the interLetterPause because it will be added next)
      delay(interWordPause - interLetterPause);
    } else if (reverseMorseMap.count(c)) {
      // It's a letter, find it and play it
      playMorseCode(reverseMorseMap[c]);
// Wait for the pause between letters
      // (We subtract interElementPause because playMorseCode already added one)
      delay(interLetterPause - interElementPause);
    }
    // Any character not in the map (like '?', '!', '[', ']') is ignored.
  }
}

// --- END NEW BLIND MODE FUNCTIONS ---


// ---
// --- Morse &amp; Display Functions (Unchanged)
// ---

bool sendMessage() {
  if (translatedMessage.length() == 0) {
    Serial.println("Message is empty, not sending.");
    return false;
  }

  String messageToSend = clientID + ":" + translatedMessage;

  Serial.print("Publishing message: ");
  Serial.println(messageToSend);
  if (mqttClient.publish(MQTT_TOPIC, messageToSend.c_str())) {
    Serial.println("Publish SUCCESS");
    return true;
  } else {
    Serial.println("Publish FAILED!");
    return false;
  }
}

void initializeMorseMap() {
    morseMap[".-"] = "A"; morseMap["-..."] = "B"; morseMap["-.-."] = "C";
    morseMap["-.."] = "D";
    morseMap["."] = "E"; morseMap["..-."] = "F";
    morseMap["--."] = "G"; morseMap["...."] = "H"; morseMap[".."] = "I";
    morseMap[".---"] = "J";
    morseMap["-.-"] = "K"; morseMap[".-.."] = "L";
    morseMap["--"] = "M"; morseMap["-."] = "N"; morseMap["---"] = "O";
    morseMap[".--."] = "P";
    morseMap["--.-"] = "Q"; morseMap[".-."] = "R";
    morseMap["..."] = "S"; morseMap["-"] = "T"; morseMap["..-"] = "U";
    morseMap["...-"] = "V";
    morseMap[".--"] = "W"; morseMap["-..-"] = "X";
    morseMap["-.--"] = "Y"; morseMap["--.."] = "Z";
    morseMap["-----"] = "0"; morseMap[".----"] = "1";
    morseMap["..---"] = "2";
    morseMap["...--"] = "3"; morseMap["....-"] = "4m"; morseMap["....."] = "5";
    morseMap["-...."] = "6"; morseMap["--..."] = "7";
    morseMap["---.."] = "8";
    morseMap["----."] = "9";
    
    morseMap["-.-.-"] = "OK"; morseMap["----"] = "YES";
    morseMap["...-."] = "NO"; morseMap[".--.--"] = "HELP";
    morseMap["..--.-"] = "WAIT";
    morseMap["-...--"] = "DONE"; morseMap["---..."] = "COME"; morseMap["--...-"] = "GO";
    morseMap[".-..--"] = "READY";
    // ---
    // --- EMOJI KEYWORDS (NOW WITH MORE EMOJIS) ---
    // ---
    Serial.println("Loading custom emoji codes...");
    morseMap[".-.-."] = "EMOJI_WINK";  // (A, R)
    morseMap[".-..-."] = "EMOJI_HEART";
// (A, L, F)
    
    // --- NEW EMOJI CODES ---
    morseMap["...-.."] = "EMOJI_LAUGH";
// (S, L)
    morseMap["-..-"] = "EMOJI_ANGRY";     // (X)
    morseMap["---..."] = "EMOJI_SURPRISED";
// (O, S)
    morseMap["...-.-"] = "EMOJI_SKULL";     // (S, K)
    
}

void translateAndClear() {
  if (currentMorse.length() &gt; 0) {
    std::string currentMorseStd = currentMorse.c_str();
    if (morseMap.count(currentMorseStd)) {
      translatedMessage += morseMap[currentMorseStd];
      if (morseMap[currentMorseStd].startsWith("EMOJI_")) {
        translatedMessage += String(char(0));
      }
      
    } else {
      translatedMessage += "?";
    }
    currentMorse = "";
  }
}

void updateDisplay() {
  display.clearDisplay();
  display.setCursor(0, 0);

  display.setTextSize(2);
  display.print("&gt;");
  display.println(currentMorse);

  display.setTextSize(1);
  display.println("");
  display.setCursor(0, 24);
  display.println("Message:");
  
  String displayMessage = translatedMessage;
  displayMessage.replace("EMOJI_WINK", "[WINK]");
  displayMessage.replace("EMOJI_HEART", "[&lt;3]");
  // --- NEW: Add text previews for the new emojis ---
  displayMessage.replace("EMOJI_LAUGH", "[HAHA]");
  displayMessage.replace("EMOJI_ANGRY", "[ANGRY]");
  displayMessage.replace("EMOJI_SURPRISED", "[SURPRISED]");
  displayMessage.replace("EMOJI_SKULL", "[SKULL]");
  displayMessage.replace(String(char(0)), "");
  
  display.setTextSize(2);
  display.setTextWrap(true);
  display.println(displayMessage);

  display.display();
}
</code>
            </pre>
        </div>
    </div>
</div>
<!-- ======================================================= -->
<!--               END: SOURCE CODE SECTION                -->
<!-- ======================================================= -->

<div id="doc-history" class="doc-section hidden bg-white p-8 rounded-lg shadow-lg fade-in space-y-8">

    <h3 class="text-2xl font-bold flex items-center">
        <i data-feather="archive" class="w-6 h-6 mr-3 text-indigo-600"></i>
        History: The Lost Invention
    </h3>

    <div class="space-y-4">
        <h4 class="text-xl font-bold text-gray-800">1. Lost Invention: The Electrical Telegraph</h4>
        <p class="text-gray-700 leading-relaxed">
            The challenge is simple: Imagine a world where global communication relied on magnets, simple circuits, and a code of taps. In the 19th century, the Electrical Telegraph was the pinnacle of human ingenuity, reducing distance to mere seconds.
        </p>
        <p class="text-gray-700 leading-relaxed">
            However, this revolutionary technology was lost—not because it failed, but because it was too fragile and too expensive to scale.
        </p>
    </div>

    <div class="space-y-6">
        <h4 class="text-xl font-bold text-gray-800">The Historical Failure Point (The Gap)</h4>
        <p class="text-gray-700 leading-relaxed">
            The original system was brilliant in concept but suffered from three major, historical limitations. Click each to learn more:
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-2 rounded-lg bg-gray-100 p-1">
            <button 
                onclick="showHistoryTab('hist-1')" 
                id="btn-hist-1"
                class="history-tab-btn p-3 w-full font-medium text-sm rounded-md transition-all flex items-center justify-center gap-2 bg-white text-indigo-700 shadow-sm">
                <i data-feather="hard-drive" class="w-4 h-4"></i>
                Massive Infrastructure
            </button>
            <button 
                onclick="showHistoryTab('hist-2')" 
                id="btn-hist-2"
                class="history-tab-btn p-3 w-full font-medium text-sm rounded-md transition-all flex items-center justify-center gap-2 text-gray-600 hover:bg-white hover:shadow-sm">
                <i data-feather="battery-charging" class="w-4 h-4"></i>
                Power Inefficiency
            </button>
            <button 
                onclick="showHistoryTab('hist-3')" 
                id="btn-hist-3"
                class="history-tab-btn p-3 w-full font-medium text-sm rounded-md transition-all flex items-center justify-center gap-2 text-gray-600 hover:bg-white hover:shadow-sm">
                <i data-feather="archive" class="w-4 h-4"></i>
                Lack of Portability
            </button>
        </div>

        <div class="p-4 rounded-b-lg">
            <div id="hist-1" class="history-tab-content space-y-2 fade-in">
                <p class="text-gray-700 leading-relaxed">
                    <strong>Massive Infrastructure:</strong> Early systems required miles of dedicated, heavy copper wire and huge, bulky mechanical relays to boost the signal. This made the system immobile and extremely vulnerable to weather damage.
                </p>
            </div>
            <div id="hist-2" class="history-tab-content hidden space-y-2 fade-in">
                <p class="text-gray-700 leading-relaxed">
                    <strong>Power Inefficiency:</strong> The system relied on constant, high-power electrical current to move physical mechanisms (the needle or the sounder). This was a significant power drain and created enormous maintenance costs.
                </p>
            </div>
            <div id="hist-3" class="history-tab-content hidden space-y-2 fade-in">
                <p class="text-gray-700 leading-relaxed">
                    <strong>Lack of Portability:</strong> Communication was confined to dedicated, expensive stations. There was no concept of a portable or rapidly deployable telegraph unit.
                </p>
            </div>
        </div>
    </div>

    <div class="p-4 bg-indigo-50 border-l-4 border-indigo-500 rounded-r-lg">
        <p class="font-medium text-indigo-800">Conclusion</p>
        <p class="text-indigo-700 leading-relaxed mt-1">
            The brilliance of the original design was its simple encoding (Morse Code), but the available materials and power systems of the 1800s were too primitive to make it truly resilient and portable.
        </p>
    </div>

    <div class="border-t border-gray-200 pt-8 space-y-6">
        
        <h4 class="text-xl font-bold text-gray-800">2. The Modern Solution: LUMINI’s Technical Fix</h4>
        
        <div class="space-y-2">
            <h5 class="text-lg font-semibold text-gray-800">LUMINI: Modernizing the Signal for Resilience</h5>
            <p class="text-gray-700 leading-relaxed">
                LUMINI revives the Telegraph's core strength—its elegant simplicity—by replacing heavy 19th-century mechanics with 21st-century micro-electronics. Our solution is scientifically sound because it translates the reliable, binary signal of Morse Code into a modern, energy-efficient digital format.
            </p>
        </div>

        <div class="space-y-2">
            <h5 class="text-lg font-semibold text-gray-800">Technical Application: Closing the Gap</h5>
            <p class="text-gray-700 leading-relaxed">
                We use modern technology (all available at a FabLab) to directly address the historical weaknesses:
            </p>

            <div class="mt-4 border border-gray-200 rounded-lg overflow-hidden">
                
                <div class="grid grid-cols-1 md:grid-cols-3">
                    <div class="px-4 py-3 font-semibold text-gray-800 bg-gray-100 border-b md:border-b-0">
                        Historical Problem (The Gap)
                    </div>
                    <div class="px-4 py-3 font-semibold text-gray-800 bg-gray-100 border-b md:border-l md:border-b-0">
                        Modern Solution (LUMINI)
                    </div>
                    <div class="px-4 py-3 font-semibold text-gray-800 bg-gray-100 border-b md:border-l md:border-b-0">
                        Technological Application
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3">
                    <div class="px-4 py-3 text-gray-700 border-b md:border-b-0">
                        Bulky Mechanical Relays
                    </div>
                    <div class="px-4 py-3 text-gray-700 border-b md:border-l md:border-b-0">
                        Microcontroller Core (e.g., esp32)
                    </div>
                    <div class="px-4 py-3 text-gray-700 md:border-l">
                        The esp32 reads the physical key-press, digitally encodes the signal, and eliminates the need for complex, heavy mechanical switches.
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 border-t">
                    <div class="px-4 py-3 text-gray-700 border-b md:border-b-0">
                        Vulnerable Copper Wiring
                    </div>
                    <div class="px-4 py-3 text-gray-700 border-b md:border-l md:border-b-0">
                        Wireless &amp; Low-Power Transmission (Wi-Fi)
                    </div>
                    <div class="px-4 py-3 text-gray-700 md:border-l">
                        We use low-power, Wi-Fi modules to transmit the data packet wirelessly, replacing the costly and fragile dedicated copper lines.
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 border-t">
                    <div class="px-4 py-3 text-gray-700 border-b md:border-b-0">
                        Expensive, Immobile Housing
                    </div>
                    <div class="px-4 py-3 text-gray-700 border-b md:border-l md:border-b-0">
                        Precision Prototyping (3D Printing)
                    </div>
                    <div class="px-4 py-3 text-gray-700 md:border-l">
                        We use Fusion 360 and 3D printing to create a compact, durable, custom-designed, and lightweight enclosure. This allows for rapid, low-cost replication of the portable unit.
                        <br>
                        <a href="#doc-making-design" class="doc-nav-link inline-flex items-center font-medium text-indigo-600 hover:text-indigo-800 transition-all mt-2">
                            Learn more
                            <i data-feather="arrow-right" class="w-4 h-4 ml-1"></i>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <div class="border-t border-gray-200 pt-8 space-y-6">

        <h4 class="text-xl font-bold text-gray-800">3. How LUMINI Helps (Potential Applications)</h4>
        <p class="text-gray-700 leading-relaxed">
            LUMINI provides a robust alternative when high-tech infrastructure fails.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-2 rounded-lg bg-gray-100 p-1">
            <button 
                onclick="showHelpTab('help-1')" 
                id="btn-help-1"
                class="help-tab-btn p-3 w-full font-medium text-sm rounded-md transition-all flex items-center justify-center gap-2 bg-white text-indigo-700 shadow-sm">
                <i data-feather="shield" class="w-4 h-4"></i>
                Disaster Resilience
            </button>
            <button 
                onclick="showHelpTab('help-2')" 
                id="btn-help-2"
                class="help-tab-btn p-3 w-full font-medium text-sm rounded-md transition-all flex items-center justify-center gap-2 text-gray-600 hover:bg-white hover:shadow-sm">
                <i data-feather="globe" class="w-4 h-4"></i>
                Low-Resource Connectivity
            </button>
            <button 
                onclick="showHelpTab('help-3')" 
                id="btn-help-3"
                class="help-tab-btn p-3 w-full font-medium text-sm rounded-md transition-all flex items-center justify-center gap-2 text-gray-600 hover:bg-white hover:shadow-sm">
                <i data-feather="book-open" class="w-4 h-4"></i>
                Educational Tool
            </button>
        </div>

        <div class="p-4 rounded-b-lg">
            
            <div id="help-1" class="help-tab-content space-y-3 fade-in">
                <p class="text-gray-700 leading-relaxed">
                    <strong class="text-gray-800">Use:</strong> 
                    LUMINI is a self-contained, off-grid communication tool for disaster zones.
                </p>
                <p class="text-gray-700 leading-relaxed">
                    <strong class="text-gray-800">Benefit:</strong> 
                    When cellular and power grids fail (e.g., after an earthquake), LUMINI's low-power system and wireless link can provide a vital, continuous text message connection where no other infrastructure works.
                </p>
            </div>
            
            <div id="help-2" class="help-tab-content hidden space-y-3 fade-in">
                <p class="text-gray-700 leading-relaxed">
                    <strong class="text-gray-800">Use:</strong> 
                    Providing communication in remote areas.
                </p>
                <p class="text-gray-700 leading-relaxed">
                    <strong class="text-gray-800">Benefit:</strong> 
                    In communities where laying fiber optics or installing cell towers is too expensive, LUMINI offers a stable, affordable, and easily maintainable communication link. The entire unit can be built using cheap, globally available components and FabLab resources.
                </p>
            </div>
            
            <div id="help-3" class="help-tab-content hidden space-y-3 fade-in">
                <p class="text-gray-700 leading-relaxed">
                    <strong class="text-gray-800">Use:</strong> 
                    Project-based learning.
                </p>
                <p class="text-gray-700 leading-relaxed">
                    <strong class="text-gray-800">Benefit:</strong> 
                    It serves as a perfect educational model. Students directly learn about electromagnetism, digital logic (binary encoding), and basic circuit design by building a functional, historically relevant communication device.
                </p>
            </div>

        </div>
    </div>

</div>
                            <!-- 
                            / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
                            
                                END OF MODIFIED SECTION 
                            
                            / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
                            -->

                        </div>
                    </div>
                </div>
            </section>
        </div>
        <!-- 

        / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
        
            END OF MODIFIED DOCUMENTATION PAGE
        
        / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
        -->
        
        <!-- Page: Roadmap -->
        <div id="roadmap" class="page hidden">
             <section class="py-20">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16 fade-in">
                        <h2 class="text-4xl md:text-5xl font-bold">Project Roadmap</h2>
                        <p class="text-gray-600 mt-4 max-w-3xl mx-auto">Our timeline for bringing the Smart Telegraph to life. Track our progress below.</p>
                    </div>
                    <div id="roadmap-container" class="max-w-3xl mx-auto space-y-8">
                        <!-- Roadmap tasks will be dynamically inserted here -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Page: Contact -->
        <div id="contact" class="page hidden">
             <section class="py-20">
                <div class="container mx-auto px-6 max-w-2xl text-center fade-in">
                     <h2 class="text-4xl md:text-5xl font-bold">Get in Touch</h2>
                     <div id="contact-logged-out" class="mt-4">
                        <p class="text-gray-600">Please <a href="#signin" class="nav-link text-indigo-600 font-semibold hover:underline">sign in</a> to ask a question.</p>
                     </div>
                     <div id="contact-logged-in" class="hidden">
                         <p class="text-gray-600 mt-4 mx-auto">We're here to answer any questions you may have. Post your question below.</p>
                         <!-- Contact Form -->
                         <form id="contact-form" class="mt-12 text-left">
                             <div class="mb-6">
                                 <label for="question" class="block text-sm font-medium text-gray-700 mb-2">Your Question</label>
                                 <textarea id="question" name="question" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Ask us anything..."></textarea>
                             </div>
                             <div class="text-center">
                                <button type="submit" class="bg-indigo-600 text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-indigo-700 transition duration-300 shadow-xl transform hover:scale-105">Submit Question</button>
                             </div>
                         </form>
                          <!-- Stored Questions Display -->
                         <div class="mt-16 text-left">
                             <h3 class="text-2xl font-bold mb-4">Submitted Questions</h3>
                             <div id="questions-container" class="space-y-4">
                                 <!-- Questions will be loaded here -->
                             </div>
                         </div>
                     </div>
                </div>
            </section>
        </div>

        <!-- Page: Sign Up -->
        <div id="signup" class="page hidden">
            <section class="py-20">
                <div class="container mx-auto px-6 max-w-md">
                    <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
                        <h2 class="text-3xl font-bold text-center mb-6">Create an Account</h2>
                        <form id="signup-form">
                            <div class="mb-4">
                                <label for="signup-email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                <input type="email" id="signup-email" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" required>
                            </div>
                            <div class="mb-6">
                                <label for="signup-password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                <input type="password" id="signup-password" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" required minlength="8">
                                <p class="text-xs text-gray-500 mt-1">Must be at least 8 characters long.</p>
                            </div>
                            <p id="signup-error" class="text-red-500 text-sm mb-4 text-center"></p>
                            <div class="text-center">
                                <button type="submit" class="w-full bg-indigo-600 text-white px-8 py-3 rounded-full font-semibold hover:bg-indigo-700 transition duration-300">Sign Up</button>
                            </div>
                        </form>
                        <p class="text-sm text-center mt-6 text-gray-600">
                            Already have an account? <a href="#signin" class="nav-link text-indigo-600 hover:underline">Sign In</a>
                        </p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Page: Sign In -->

<div id="signin" class="page">
            <section class="min-h-screen flex items-center justify-center bg-gray-100">
                <div class="container mx-auto px-6 max-w-md">
                    <div class="bg-white p-8 rounded-lg shadow-lg fade-in">
                        <img src="https://i.ibb.co/XZVSKkBT/Screenshot-2025-11-10-174930-Photoroom.png" alt="Lumini Logo" class="h-20 w-20 mx-auto mb-6">
                        <h2 class="text-3xl font-bold text-gray-800 text-center mb-6">Sign In to Lumini</h2>
                        
                        <form id="signin-form">
                            <div class="mb-4">
                                <label for="signin-email" class="block text-gray-700 font-medium mb-2">Email</label>
                                <input type="email" id="signin-email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="you@example.com" required>
                            </div>
                            <div class="mb-6">
                                <label for="signin-password" class="block text-gray-700 font-medium mb-2">Password</label>
                                <input type="password" id="signin-password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="••••••••" required>
                            </div>
                            <p id="signin-error" class="text-red-500 text-sm mb-4 text-center"></p>
                            <div class="text-center">
                                <button type="submit" class="w-full bg-indigo-600 text-white px-8 py-3 rounded-full font-semibold hover:bg-indigo-700 transition duration-300 shadow-xl transform hover:scale-105">
                                    Sign In
                                </button>
                            </div>
                        </form>

                        <div class="text-center pt-4">
                            <a href="#" id="forgot-password-link" class="text-sm font-medium text-indigo-600 hover:text-indigo-500">
                                Forgot your password?
                            </a>
                        </div>
                        <div class="flex items-center justify-center my-6">
                            <span class="border-b w-1/5 lg:w-1/4"></span>
                            <span class="text-xs text-center text-gray-500 uppercase mx-3">or</span>
                            <span class="border-b w-1/5 lg:w-1/4"></span>
                        </div>
                        
                        <button id="google-signin-button" class="w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 px-8 py-3 rounded-full font-semibold hover:bg-gray-50 transition duration-300 shadow-md transform hover:scale-105">
                            <svg class="w-5 h-5 mr-3" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/><path fill="#FF3D00" d="M6.306 14.691c-1.258 3.053-1.99 6.479-1.99 10.141c0 3.662.732 7.088 1.99 10.141l-5.657 5.657C.138 36.651 0 32.341 0 28s.138-8.651 1.649-12.969l5.657 4.66z"/><path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-5.657-5.657C30.01 35.25 27.145 36 24 36c-5.223 0-9.65-3.343-11.303-7.918l-5.657 5.657C9.34 40.023 16.095 44 24 44z"/><path fill="#1E88E5" d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.23 4.14-4.082 5.571l5.657 5.657C41.312 34.762 44 30.651 44 24c0-1.341-.138-2.65-.389-3.917z"/></svg>
                            Sign in with Google
                        </button>
                        
                        <p class="text-center text-gray-600 text-sm mt-6">
                            Don't have an account? <a href="#signup" class="nav-link text-indigo-600 hover:underline font-medium">Sign Up</a>
                        </p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-400 mt-24">
        <div class="container mx-auto px-6 py-12 text-center">
            
            <div class="flex justify-center space-x-6 mb-8">
                
                <a href="#" class="social-link" title="Twitter/X (Coming Soon)">
                    <i data-feather="twitter" class="w-6 h-6 hover:text-white transition-colors duration-200"></i>
                </a>
                
                <a href="#" class="social-link" title="GitHub (Coming Soon)">
                    <i data-feather="github" class="w-6 h-6 hover:text-white transition-colors duration-200"></i>
                </a>

                <a href="https://bt.linkedin.com/in/lumini-tra-3b91bb396" target="_blank" rel="noopener noreferrer" title="LinkedIn">
                    <i data-feather="linkedin" class="w-6 h-6 hover:text-white transition-colors duration-200"></i>
                </a>
                
                <a href="https://www.instagram.com/lumini_tra/?utm_source=ig_web_button_share_sheet" target="_blank" rel="noopener noreferrer" title="Instagram">
                    <i data-feather="instagram" class="w-6 h-6 hover:text-white transition-colors duration-200"></i>
                </a>
            </div>

            <p>&copy; 2025 Lumini Project. All rights reserved.</p>
            <p class="text-sm mt-1">A project by Jigme, Tandin, Ugyen, and Tenzing.</p>
        </div>
    </footer>
    
    <!-- Modal for Social Links -->
    <div id="social-modal-overlay" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div id="social-modal-box" class="modal-box bg-white rounded-lg shadow-2xl p-8 max-w-sm w-full text-center transform scale-95 opacity-0">
            <h3 class="text-2xl font-bold mb-4">Feature Not Available</h3>
            <p class="text-gray-600 mb-6">Our social media pages are still under construction. Please check back later!</p>
            <button id="close-modal-button" class="bg-indigo-600 text-white px-6 py-2 rounded-full font-semibold hover:bg-indigo-700 transition duration-300">Got it</button>
        </div>
    </div>

    <script>
        // Function to handle tabs within the "Making the Design" section
        // Function to handle tabs within the "Circuit Design" section
        /**
 * Handles showing and hiding the tabs in the "Learn Morse Code" section.
 */
/**
 * Handles showing and hiding the tabs in the "Learn Morse Code" section.
 * (Call this function 'showMorseTab')
 */
/*
 * Manages the interactive tabs in the "History" section.
 
 */
/*
 * Manages the interactive tabs in the "History > Failure Point" section.

 */
function copyActiveArduinoCode() {
        let activeCodeId = 'arduino-code-v17'; // Default to v17
        
        // Check which tab panel is visible
        if (!document.getElementById('tab-panel-v18').classList.contains('hidden')) {
            activeCodeId = 'arduino-code-v18';
        }

        const codeBlock = document.getElementById(activeCodeId);
        const codeText = codeBlock.innerText;
        
        navigator.clipboard.writeText(codeText).then(() => {
            // Update button text to "Copied!"
            const copyBtn = document.getElementById('copy-code-btn');
            const originalIcon = copyBtn.innerHTML; // Save original content
            copyBtn.innerHTML = '<i data-feather="check" class="w-4 h-4"></i> <span>Copied!</span>';
            feather.replace(); // Re-render the new icon
            
            // Revert button text after 2 seconds
            setTimeout(() => {
                copyBtn.innerHTML = originalIcon;
                feather.replace(); // Re-render the original icon
            }, 2000);
        }).catch(err => {
            console.error('Failed to copy text: ', err);
        });
    }

    // --- NEW: Tab Switching Logic ---
    document.addEventListener('DOMContentLoaded', () => {
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabPanels = document.querySelectorAll('.tab-panel');

        // Get button and panel elements
        const btnV17 = document.getElementById('tab-btn-v17');
        const btnV18 = document.getElementById('tab-btn-v18');
        const panelV17 = document.getElementById('tab-panel-v17');
        const panelV18 = document.getElementById('tab-panel-v18');

        // Function to switch tabs
        function switchTab(activeBtn, inactiveBtn, activePanel, inactivePanel) {
            // Show active panel, hide inactive
            activePanel.classList.remove('hidden');
            inactivePanel.classList.add('hidden');

            // Style active button
            activeBtn.classList.add('text-indigo-600', 'border-indigo-600');
            activeBtn.classList.remove('text-gray-500', 'hover:text-gray-700');
            
            // Style inactive button
            inactiveBtn.classList.add('text-gray-500', 'hover:text-gray-700');
            inactiveBtn.classList.remove('text-indigo-600', 'border-indigo-600');
        }

        // Add click listeners
        btnV17.addEventListener('click', () => {
            switchTab(btnV17, btnV18, panelV17, panelV18);
        });

        btnV18.addEventListener('click', () => {
            switchTab(btnV18, btnV17, panelV18, panelV17);
        });
    });
function copyArduinoCode() {
    const codeBlock = document.getElementById('arduino-code');
    const codeText = codeBlock.innerText; // .innerText decodes the &lt; &gt; back to < >

    navigator.clipboard.writeText(codeText).then(() => {
        // --- Success Feedback ---
        const button = document.getElementById('copy-code-btn');
        button.innerHTML = '<i data-feather="check" class="w-4 h-4"></i><span>Copied!</span>';
        
        // Re-enable feather icons
        feather.replace(); 
        
        // Reset button text after 2 seconds
        setTimeout(() => {
            button.innerHTML = '<i data-feather="copy" class="w-4 h-4"></i><span>Copy Code</span>';
            feather.replace();
        }, 2000);

    }).catch(err => {
        // --- Error Feedback ---
        console.error('Failed to copy code: ', err);
        const button = document.getElementById('copy-code-btn');
        button.innerHTML = '<span>Error!</span>';
        
        setTimeout(() => {
            button.innerHTML = '<i data-feather="copy" class="w-4 h-4"></i><span>Copy Code</span>';
            feather.replace();
        }, 2000);
    });
}
hljs.highlightAll();
function showHistoryTab(tabId) {
    // Hide all tab content
    const contentTabs = document.querySelectorAll('.history-tab-content');
    contentTabs.forEach(tab => {
        tab.classList.add('hidden');
    });

    // Remove 'active' style from all buttons
    const buttons = document.querySelectorAll('.history-tab-btn');
    buttons.forEach(btn => {
        btn.classList.remove('bg-white', 'text-indigo-700', 'shadow-sm');
        btn.classList.add('text-gray-60A0', 'hover:bg-white', 'hover:shadow-sm');
    });

    // Show the target tab content
    const targetContent = document.getElementById(tabId);
    if (targetContent) {
        targetContent.classList.remove('hidden');
    }

    // Set the target button to 'active'
    const targetButton = document.getElementById('btn-' + tabId);
    if (targetButton) {
        targetButton.classList.add('bg-white', 'text-indigo-700', 'shadow-sm');
        targetButton.classList.remove('text-gray-600', 'hover:bg-white', 'hover:shadow-sm');
    }
}

/*
 * Manages the interactive tabs in the "History > How LUMINI Helps" section.
 */
function showHelpTab(tabId) {
    // Hide all tab content
    const contentTabs = document.querySelectorAll('.help-tab-content');
    contentTabs.forEach(tab => {
        tab.classList.add('hidden');
    });

    // Remove 'active' style from all buttons
    const buttons = document.querySelectorAll('.help-tab-btn');
    buttons.forEach(btn => {
        btn.classList.remove('bg-white', 'text-indigo-700', 'shadow-sm');
        btn.classList.add('text-gray-600', 'hover:bg-white', 'hover:shadow-sm');
    });

    // Show the target tab content
    const targetContent = document.getElementById(tabId);
    if (targetContent) {
        targetContent.classList.remove('hidden');
    }

    // Set the target button to 'active'
    const targetButton = document.getElementById('btn-' + tabId);
    if (targetButton) {
        targetButton.classList.add('bg-white', 'text-indigo-7q00', 'shadow-sm');
        targetButton.classList.remove('text-gray-600', 'hover:bg-white', 'hover:shadow-sm');
    }
}
function showHistoryTab(tabId) {
    // Hide all tab content
    const contentTabs = document.querySelectorAll('.history-tab-content');
    contentTabs.forEach(tab => {
        tab.classList.add('hidden');
    });

    // Remove 'active' style from all buttons
    const buttons = document.querySelectorAll('.history-tab-btn');
    buttons.forEach(btn => {
        btn.classList.remove('bg-white', 'text-indigo-700', 'shadow-sm');
        btn.classList.add('text-gray-600', 'hover:bg-white', 'hover:shadow-sm');
    });

    // Show the target tab content
    const targetContent = document.getElementById(tabId);
    if (targetContent) {
        targetContent.classList.remove('hidden');
    }

    // Set the target button to 'active'
    const targetButton = document.getElementById('btn-' + tabId);
    if (targetButton) {
        targetButton.classList.add('bg-white', 'text-indigo-700', 'shadow-sm');
        targetButton.classList.remove('text-gray-600', 'hover:bg-white', 'hover:shadow-sm');
    }
}
function showMorseTab(tabId) {
    // 1. Hide all morse tab content
    // Note: We use querySelectorAll with a class to get all content panes
    const allMorseContent = document.querySelectorAll('.morse-tab-content');
    allMorseContent.forEach(content => {
        if (!content.classList.contains('hidden')) {
            content.classList.add('hidden');
        }
    });

    // 2. Deactivate all morse tab buttons
    // We use querySelectorAll with a class to get all buttons
    const allMorseButtons = document.querySelectorAll('.morse-tab-btn');
    allMorseButtons.forEach(btn => {
        // Remove active styles
        btn.classList.remove('bg-indigo-100', 'text-indigo-700');
        // Add inactive styles
        btn.classList.add('text-gray-600', 'hover:bg-gray-100', 'hover:text-gray-900');
    });

    // 3. Show the selected tab content
    // We use getElementById to find the specific content pane to show
    const selectedContent = document.getElementById('tab-morse-' + tabId);
    if (selectedContent) {
        selectedContent.classList.remove('hidden');
    }

    // 4. Activate the selected tab button
    // We use getElementById to find the specific button to activate
    const selectedButton = document.getElementById('btn-morse-' + tabId);
    if (selectedButton) {
        // Remove inactive styles
        selectedButton.classList.remove('text-gray-600', 'hover:bg-gray-100', 'hover:text-gray-900');
        // Add active styles
        selectedButton.classList.add('bg-indigo-100', 'text-indigo-700');
    }
}   
        function showCircuitTab(tabId) {
            try {
                // Hide all content tabs
                document.querySelectorAll('#doc-circuit-design .circuit-tab-content').forEach(tab => {
                    tab.classList.add('hidden');
                });

                // Deactivate all tab buttons
                document.querySelectorAll('#doc-circuit-design .circuit-tab-btn').forEach(btn => {
                    btn.classList.remove('bg-indigo-100', 'text-indigo-700');
                    btn.classList.add('text-gray-600', 'hover:bg-gray-100', 'hover:text-gray-900');
                });

                // Show the selected content tab
                const selectedTab = document.getElementById(`tab-${tabId}`);
                if (selectedTab) {
                    selectedTab.classList.remove('hidden');
                }

                // Activate the selected tab button
                const selectedButton = document.getElementById(`btn-${tabId}`);
                if (selectedButton) {
                    selectedButton.classList.add('bg-indigo-100', 'text-indigo-700');
                    selectedButton.classList.remove('text-gray-600', 'hover:bg-gray-100', 'hover:text-gray-900');
                }
                
                // Re-run feather icons
                if (typeof feather !== 'undefined') {
                    feather.replace();
                }
            } catch (error) {
                console.error('Error switching circuit tab:', error);
            }
        }
        // Make this function globally accessible for the onclick attributes
        window.showCircuitTab = showCircuitTab;


        // This function should already be here from last time:
        // Function to handle tabs within the "Making the Design" section

        // ... (rest of the function)
        function showDesignTab(tabId) {
            try {
                // Hide all content tabs
                document.querySelectorAll('#doc-making-design .design-tab-content').forEach(tab => {
                    tab.classList.add('hidden');
                });

                // Deactivate all tab buttons
                document.querySelectorAll('#doc-making-design .design-tab-btn').forEach(btn => {
                    btn.classList.remove('bg-indigo-100', 'text-indigo-700');
                    btn.classList.add('text-gray-600', 'hover:bg-gray-100', 'hover:text-gray-900');
                });

                // Show the selected content tab
                const selectedTab = document.getElementById(`tab-${tabId}`);
                if (selectedTab) {
                    selectedTab.classList.remove('hidden');
                }

                // Activate the selected tab button
                const selectedButton = document.getElementById(`btn-${tabId}`);
                if (selectedButton) {
                    selectedButton.classList.add('bg-indigo-100', 'text-indigo-700');
                    selectedButton.classList.remove('text-gray-600', 'hover:bg-gray-100', 'hover:text-gray-900');
                }
                
                // Re-run feather icons if feather is loaded (this is a safer check)
                if (typeof feather !== 'undefined') {
                    feather.replace();
                }
            } catch (error) {
                console.error('Error switching design tab:', error);
            }
        }
    // Function for 'Circuit Design' tabs

        
        // This line makes the function available to the "onclick" in your HTML
        window.showDesignTab = showDesignTab;

        // PASTE THE CODE BLOCK ABOVE THIS LINE:
        function handleForgotPassword() {
    const emailField = document.getElementById('signin-email');
    const email = emailField.value;
    if (!email) {
        alert('Please enter your email address in the email field first, then click "Forgot Password".');
        return;
    }
    firebase.auth().sendPasswordResetEmail(email)
        .then(() => {
            alert('Password reset email sent! Check your inbox.');
        })
        .catch((error) => {
            console.error("Password reset error:", error);
            alert('Error: ' + error.message);
        });
}


        document.addEventListener('DOMContentLoaded', function() {
            // --- Firebase Configuration ---
            const firebaseConfig = {
              apiKey: "AIzaSyDtV1VuCnNCDeuHwGX4ZUCG0WMJM82-hBY",
              authDomain: "luminix-bcc28.firebaseapp.com",
              projectId: "luminix-bcc28",
              storageBucket: "luminix-bcc28.firebasestorage.app",
              messagingSenderId: "217255412785",
              appId: "1:217255412785:web:dccb64a43aa83c6b234110",
              measurementId: "G-TKJELBK1F5"
            };
            
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();
            const auth = firebase.auth();

            if (typeof feather !== 'undefined') {
                feather.replace();
            }

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // --- Header Dropdown Logic ---
            const dropdownButton = document.getElementById('pages-dropdown-button');
            const dropdownMenu = document.getElementById('pages-dropdown');
            if(dropdownButton) {
                dropdownButton.addEventListener('click', () => {
                    dropdownMenu.classList.toggle('hidden');
                });
            }
            window.addEventListener('click', function(e) {
                if (dropdownButton && !dropdownButton.contains(e.target) && dropdownMenu && !dropdownMenu.contains(e.target)) {
                    dropdownMenu.classList.add('hidden');
                }
            });

            // --- Fade-in on Scroll ---
            const faders = document.querySelectorAll('.fade-in');
            const appearOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
            const appearOnScroll = new IntersectionObserver(function(entries, observer) {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) return;
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                });
            }, appearOptions);
            faders.forEach(fader => appearOnScroll.observe(fader));

            // --- Gallery Logic ---
            const mediaDisplayContainer = document.getElementById('media-display-container');
            const thumbnails = document.querySelectorAll('.gallery-thumbnail');
            function updateMedia(thumbnail) {
                if (!thumbnail) return;
                const dataType = thumbnail.dataset.type;
                const dataSrc = thumbnail.dataset.src;
                mediaDisplayContainer.innerHTML = '';
                if (dataType === 'video') {
                    const video = document.createElement('video');
                    video.src = dataSrc;
                    video.controls = true;
                    video.autoplay = true;
                    video.muted = true;
                    video.loop = true;
                    video.className = 'w-full h-full object-cover rounded-lg';
                    mediaDisplayContainer.appendChild(video);
                } else {
                    const img = document.createElement('img');
                    img.src = dataSrc;
                    img.alt = thumbnail.alt;
                    img.className = 'w-full h-full object-cover rounded-lg';
                    mediaDisplayContainer.appendChild(img);
                }
                thumbnails.forEach(t => t.classList.remove('border-indigo-600'));
                thumbnail.classList.add('border-indigo-600');
            }
            thumbnails.forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    updateMedia(this);
                });
            });
            if (thumbnails.length > 0) {
                updateMedia(thumbnails[0]);
            }

            // --- Page Navigation Logic ---
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');
            async function showPage(pageId) {
                pages.forEach(page => {
                    page.classList.toggle('hidden', page.id !== pageId);
                });
                window.scrollTo(0, 0);

                if (pageId === 'roadmap') {
                    await renderRoadmap();
                }
                if (pageId === 'contact') {
                    await displayQuestions();
                }
                // NEW: When documentation page is shown, default to the first tab
                if (pageId === 'documentation') {
                    showDocSection('doc-circuit-design');
                }

                // Re-trigger fade-in animations for the new page
                document.querySelectorAll(`#${pageId} .fade-in`).forEach(fader => {
                    fader.classList.remove('visible');
                    appearOnScroll.observe(fader)
                });
                
                if (typeof feather !== 'undefined') {
                    feather.replace();
                }
            }
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('href').substring(1);
                    showPage(pageId);
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                    if (dropdownMenu && !dropdownMenu.classList.contains('hidden')) {
                        dropdownMenu.classList.add('hidden');
                    }
                });
            });
            
            // --- Documentation Tab Logic ---
            const docNavLinks = document.querySelectorAll('.doc-nav-link');
            const docSections = document.querySelectorAll('.doc-section');

            function showDocSection(sectionId) {
                // Hide all sections
                docSections.forEach(section => {
                    section.classList.add('hidden');
                });
                
                // Show the target section
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                    // Re-trigger fade-in for this section's content
                    targetSection.querySelectorAll('.fade-in').forEach(fader => {
                        fader.classList.remove('visible');
                        appearOnScroll.observe(fader);
                    });
                }

                // Update active link styling
                docNavLinks.forEach(link => {
                    link.classList.remove('bg-indigo-100', 'text-indigo-700', 'font-bold');
                    link.classList.add('text-gray-600', 'hover:bg-gray-100');
                    if (link.getAttribute('href') === `#${sectionId}`) {
                        link.classList.add('bg-indigo-100', 'text-indigo-700', 'font-bold');
                        link.classList.remove('text-gray-600', 'hover:bg-gray-100');
                    }
                });
                
                if (typeof feather !== 'undefined') {
                    feather.replace(); // Refresh icons
                }
            }

            docNavLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('href').substring(1);
                    showDocSection(sectionId);
                });
            });
            
            // --- AUTHENTICATION LOGIC ---
            const authLinks = document.getElementById('auth-links');
            const userInfo = document.getElementById('user-info');
            const userEmailSpan = document.getElementById('user-email');
            const mobileAuthLinks = document.getElementById('mobile-auth-links');
            const mobileUserInfo = document.getElementById('mobile-user-info');
            const mobileUserEmailSpan = document.getElementById('mobile-user-email');
            const contactLoggedOut = document.getElementById('contact-logged-out');
            const contactLoggedIn = document.getElementById('contact-logged-in');

            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    authLinks.style.display = 'none';
                    userInfo.style.display = 'flex';
                    userEmailSpan.textContent = user.email;

                    mobileAuthLinks.style.display = 'none';
                    mobileUserInfo.style.display = 'block';
                    mobileUserEmailSpan.textContent = user.email;

                    if(contactLoggedOut && contactLoggedIn){
                        contactLoggedOut.style.display = 'none';
                        contactLoggedIn.style.display = 'block';
                    }

                } else {
                    // User is signed out
                    authLinks.style.display = 'flex';
                    userInfo.style.display = 'none';
                    userEmailSpan.textContent = '';
                    
                    mobileAuthLinks.style.display = 'block';
                    mobileUserInfo.style.display = 'none';
                    mobileUserEmailSpan.textContent = '';

                    if(contactLoggedOut && contactLoggedIn){
                        contactLoggedOut.style.display = 'block';
                        contactLoggedIn.style.display = 'none';
                    }
                }
            });

            // Sign Up
            const signupForm = document.getElementById('signup-form');
            const signupError = document.getElementById('signup-error');
            signupForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = signupForm['signup-email'].value;
                const password = signupForm['signup-password'].value;
                
                if(password.length < 8) {
                    signupError.textContent = "Password must be at least 8 characters.";
                    return;
                }
                
                auth.createUserWithEmailAndPassword(email, password)
                    .then(userCredential => {
                        signupForm.reset();
                        signupError.textContent = '';
                        showPage('home');
                    })
                    .catch(error => {
                        signupError.textContent = error.message;
                    });
            });

            // Sign In
            const signinForm = document.getElementById('signin-form');
            const signinError = document.getElementById('signin-error');
            signinForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = signinForm['signin-email'].value;
                const password = signinForm['signin-password'].value;

                auth.signInWithEmailAndPassword(email, password)
                    .then(userCredential => {
                        signinForm.reset();
                        signinError.textContent = '';
                        showPage('home');
                    })
                    .catch(error => {
                        signinError.textContent = error.message;
                    });
            });
            const forgotPasswordLink = document.getElementById('forgot-password-link');
if (forgotPasswordLink) {
    forgotPasswordLink.addEventListener('click', (e) => {
        e.preventDefault();
        handleForgotPassword();
    });
}
            // ... your existing signinForm event listener ...
        signinForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = signinForm['signin-email'].value;
            const password = signinForm['signin-password'].value;
            auth.signInWithEmailAndPassword(email, password)
                .then(userCredential => {
                    signinForm.reset();
                    signinError.textContent = '';
                    showPage('home');
                })
                .catch(error => {
                    signinError.textContent = error.message;
                });
        });

        // ADD THIS NEW CODE
        // --- Google Sign-In ---
        const googleProvider = new firebase.auth.GoogleAuthProvider();
        
        const googleSignInButton = document.getElementById('google-signin-button');
        
        if (googleSignInButton) {
            googleSignInButton.addEventListener('click', () => {
                const signinError = document.getElementById('signin-error');
                signinError.textContent = ''; // Clear previous errors

                auth.signInWithPopup(googleProvider)
                    .then((result) => {
                        // Sign-in successful.
                        console.log('Signed in with Google:', result.user);
                        showPage('home'); // Go to home page
                    })
                    .catch((error) => {
                        // Handle Errors here.
                        console.error('Google Sign-In Error:', error.message);
                        if(signinError) {
                            signinError.textContent = error.message;
                        }
                    });
            });
        }
        // END OF NEW CODE

        // Sign Out
        document.getElementById('signout-button').addEventListener('click', () => auth.signOut());
        // ... rest of your script ...

            // Sign Out
            document.getElementById('signout-button').addEventListener('click', () => auth.signOut());
            document.getElementById('mobile-signout-button').addEventListener('click', () => auth.signOut());


            // --- Contact Form Logic with Firebase ---
            const contactForm = document.getElementById('contact-form');
            const questionsContainer = document.getElementById('questions-container');

            async function displayQuestions() {
                if(!questionsContainer) return;
                questionsContainer.innerHTML = '<p class="text-gray-500">Loading questions...</p>';
                const snapshot = await db.collection('questions').orderBy('timestamp', 'desc').get();
                questionsContainer.innerHTML = '';
                if (snapshot.empty) {
                    questionsContainer.innerHTML = '<p class="text-gray-500">No questions submitted yet.</p>';
                    return;
                }
                snapshot.forEach(doc => {
                    const question = doc.data();
                    const questionElement = document.createElement('div');
                    questionElement.className = 'bg-gray-100 p-4 rounded-lg';
                    
                    const userEmailElement = document.createElement('p');
                    userEmailElement.className = 'text-xs font-bold text-indigo-600 mb-1';
                    userEmailElement.textContent = question.userEmail || 'Anonymous';
                    
                    const questionTextElement = document.createElement('p');
                    questionTextElement.textContent = question.text;
                    
                    questionElement.appendChild(userEmailElement);
                    questionElement.appendChild(questionTextElement);
                    questionsContainer.appendChild(questionElement);
                });
            }

            if(contactForm) {
                contactForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const questionText = document.getElementById('question').value;
                    const user = auth.currentUser;

                    if (questionText.trim() === '' || !user) return;

                    try {
                        await db.collection('questions').add({
                            text: questionText,
                            userEmail: user.email,
                            userId: user.uid,
                            timestamp: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        document.getElementById('question').value = '';
                        alert('Thank you! Your question has been submitted.');
                        displayQuestions();
                    } catch (error) {
                        console.error("Error adding document: ", error);
                        alert('Sorry, there was an error submitting your question. Please try again.');
                    }
                });
            }

            // --- Social Media Modal Logic ---
            const modalOverlay = document.getElementById('social-modal-overlay');
            const modalBox = document.getElementById('social-modal-box');
            const closeModalButton = document.getElementById('close-modal-button');
            const socialLinks = document.querySelectorAll('.social-link');

            function openModal() {
                modalOverlay.classList.remove('hidden');
                setTimeout(() => {
                    modalOverlay.classList.remove('opacity-0');
                    modalBox.classList.remove('opacity-0', 'scale-95');
                }, 10);
            }

            function closeModal() {
                modalOverlay.classList.add('opacity-0');
                modalBox.classList.add('opacity-0', 'scale-95');
                setTimeout(() => {
                    modalOverlay.classList.add('hidden');
                }, 300);
            }

            socialLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    openModal();
                });
            });
            if(closeModalButton) {
                closeModalButton.addEventListener('click', closeModal);
            }
            if(modalOverlay) {
                modalOverlay.addEventListener('click', function(e) {
                    if (e.target === modalOverlay) {
                        closeModal();
                    }
                });
            }
            
            // --- Roadmap Logic ---
            const roadmapContainer = document.getElementById('roadmap-container');
            const roadmapTasks = [
                { id: 'circuit_testing', title: 'Circuit Testing', dates: '23 Sep - 10th Oct' },
                { id: 'website_design', title: 'Website Designing/Building', dates: '10th Oct - 17th Oct' },
                { id: 'assembling', title: 'Assembling', dates: '17th Oct - 25th Oct' },
                { id: 'debugging', title: 'Debugging', dates: '25th Oct - 10th Nov' },
                { id: 'finalize_documentation', title: 'Finalize Documentation', dates: '10th Nov - 20th Nov' },
            ];

            async function renderRoadmap() {
                if (!roadmapContainer) return;
                roadmapContainer.innerHTML = ''; // Clear existing content
                
                const progressSnap = await db.collection('roadmap_progress').get();
                const progressData = {};
                progressSnap.forEach(doc => {
                    progressData[doc.id] = doc.data().progress;
                });

                roadmapTasks.forEach(task => {
                    const progress = progressData[task.id] || 0;
                    const taskElement = document.createElement('div');
                    taskElement.className = 'bg-white p-6 rounded-lg shadow-lg fade-in';
                    taskElement.innerHTML = `
                        <div id="task-${task.id}">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-xl font-bold text-gray-800">${task.title}</h3>
                                <p class="text-sm text-gray-500">${task.dates}</p>
                            </div>
                            <!-- Progress Display -->
                            <div class="progress-display">
                                <div class="w-full bg-gray-200 rounded-full h-2.5">
                                    <div class="bg-indigo-600 h-2.5 rounded-full" style="width: ${progress}%"></div>
                                </div>
                                <div class="flex justify-between items-center mt-2">
                                    <span class="text-sm font-medium text-indigo-700">${progress}% Complete</span>
                                    <button class="edit-progress-btn text-sm text-indigo-600 hover:underline" data-task-id="${task.id}">Edit</button>
                                </div>
                            </div>
                            <!-- Progress Editor (hidden by default) -->
                            <div class="progress-editor hidden mt-4">
                                <label class="block text-sm font-medium text-gray-700">Set Progress: <span class="font-bold">${progress}%</span></label>
                                <input type="range" min="0" max="100" value="${progress}" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="text-right mt-2">
                                    <button class="cancel-edit-btn text-sm text-gray-600 hover:underline mr-4" data-task-id="${task.id}">Cancel</button>
                                    <button class="save-progress-btn bg-indigo-600 text-white px-4 py-1 rounded-md text-sm hover:bg-indigo-700" data-task-id="${task.id}">Save</button>
                                </div>
                            </div>
                        </div>
                    `;
                    roadmapContainer.appendChild(taskElement);
                });
                
                addRoadmapEventListeners();
            }
            
            function addRoadmapEventListeners() {
                document.querySelectorAll('.edit-progress-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const taskId = this.dataset.taskId;
                        const taskContainer = document.getElementById(`task-${taskId}`);
                        taskContainer.querySelector('.progress-display').classList.add('hidden');
                        taskContainer.querySelector('.progress-editor').classList.remove('hidden');
                    });
                });

                document.querySelectorAll('.cancel-edit-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const taskId = this.dataset.taskId;
                        const taskContainer = document.getElementById(`task-${taskId}`);
                        taskContainer.querySelector('.progress-display').classList.remove('hidden');
                        taskContainer.querySelector('.progress-editor').classList.add('hidden');
                    });
                });

                document.querySelectorAll('.progress-editor input[type="range"]').forEach(slider => {
                    slider.addEventListener('input', function() {
                        const label = this.previousElementSibling.querySelector('span');
                        label.textContent = `${this.value}%`;
                    });
                });
                
                document.querySelectorAll('.save-progress-btn').forEach(button => {
                    button.addEventListener('click', async function() {
                        const taskId = this.dataset.taskId;
                        // Use a simple prompt for password.
                        // NOTE: In a real-world app, use Firebase Auth rules for security.
                        const password = prompt("Please enter the password to save changes:");
                        
                        // Check if password is correct
                        if (password === 'lumini') {
                            const taskContainer = document.getElementById(`task-${taskId}`);
                            const newProgress = taskContainer.querySelector('input[type="range"]').value;
                            
                            try {
                                // Save to Firestore
                                await db.collection('roadmap_progress').doc(taskId).set({ progress: parseInt(newProgress, 10) });
                                
                                // Show success message (custom modal would be better)
                                alert('Progress saved successfully!');
                                renderRoadmap(); // Re-render to show updated state
                                
                            } catch (error) {
                                console.error("Error saving progress: ", error);
                                alert('Error saving progress. Please try again.');
                            }

                        } else if (password !== null) { // Only show error if they entered something
                            alert('Incorrect password. Changes were not saved.');
                        }
                        
                    });
                });
            }

            // Initial page load
            showPage('home');
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox-plus-jquery.min.js"></script>
</body>
</html>
